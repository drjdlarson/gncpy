

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>gncpy.games.SimpleUAV2d &mdash; GNCPy 2.0.5.dev0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css?v=76b2166b" />

  
    <link rel="canonical" href="https://drjdlarson.github.io/gncpy/_modules/gncpy/games/SimpleUAV2d.html" />
      <script src="../../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../../_static/documentation_options.js?v=aa08a9b3"></script>
      <script src="../../../_static/doctools.js?v=9a2dae69"></script>
      <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../../../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../../../_static/copybutton.js?v=cbcfbdad"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #9E1B32" >

          
          
          <a href="../../../index.html" class="icon icon-home">
            GNCPy
              <img src="../../../_static/logo.svg" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../api.html">API Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/gncpy.html">gncpy</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../_autosummary/gncpy/gncpy.control.html">control</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../_autosummary/gncpy/control/gncpy.control.elqr.html">elqr</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_autosummary/gncpy/control/gncpy.control.lqr.html">lqr</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../_autosummary/gncpy/gncpy.coordinate_transforms.html">coordinate_transforms</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../_autosummary/gncpy/coordinate_transforms/gncpy.coordinate_transforms.ecef_to_LLA.html">gncpy.coordinate_transforms.ecef_to_LLA</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_autosummary/gncpy/coordinate_transforms/gncpy.coordinate_transforms.ecef_to_NED.html">gncpy.coordinate_transforms.ecef_to_NED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_autosummary/gncpy/coordinate_transforms/gncpy.coordinate_transforms.lla_to_ECEF.html">gncpy.coordinate_transforms.lla_to_ECEF</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_autosummary/gncpy/coordinate_transforms/gncpy.coordinate_transforms.lla_to_NED.html">gncpy.coordinate_transforms.lla_to_NED</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_autosummary/gncpy/coordinate_transforms/gncpy.coordinate_transforms.ned_to_LLA.html">gncpy.coordinate_transforms.ned_to_LLA</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../_autosummary/gncpy/gncpy.data_fusion.html">data_fusion</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../_autosummary/gncpy/data_fusion/gncpy.data_fusion.GeneralizedCovarianceIntersection.html">gncpy.data_fusion.GeneralizedCovarianceIntersection</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../_autosummary/gncpy/gncpy.distributions.html">distributions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../_autosummary/gncpy/distributions/gncpy.distributions.Particle.html">Particle</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_autosummary/gncpy/distributions/gncpy.distributions.ParticleDistribution.html">ParticleDistribution</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_autosummary/gncpy/distributions/gncpy.distributions.QuadraturePoints.html">QuadraturePoints</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_autosummary/gncpy/distributions/gncpy.distributions.SigmaPoints.html">SigmaPoints</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_autosummary/gncpy/distributions/gncpy.distributions.SimpleParticleDistribution.html">SimpleParticleDistribution</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../_autosummary/gncpy/gncpy.dynamics.html">dynamics</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../_autosummary/gncpy/dynamics/gncpy.dynamics.aircraft.html">aircraft</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_autosummary/gncpy/dynamics/gncpy.dynamics.basic.html">basic</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../_autosummary/gncpy/gncpy.errors.html">errors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../_autosummary/gncpy/errors/gncpy.errors.ExtremeMeasurementNoiseError.html">gncpy.errors.ExtremeMeasurementNoiseError</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_autosummary/gncpy/errors/gncpy.errors.ParticleDepletionError.html">gncpy.errors.ParticleDepletionError</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_autosummary/gncpy/errors/gncpy.errors.ParticleEstimationDomainError.html">gncpy.errors.ParticleEstimationDomainError</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../_autosummary/gncpy/gncpy.filters.html">filters</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../_autosummary/gncpy/filters/gncpy.filters.bayes_filter.html">bayes_filter</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_autosummary/gncpy/filters/gncpy.filters.bootstrap_filter.html">bootstrap_filter</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_autosummary/gncpy/filters/gncpy.filters.ekf_gaussian_scale_mixture_filter.html">ekf_gaussian_scale_mixture_filter</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_autosummary/gncpy/filters/gncpy.filters.extended_kalman_filter.html">extended_kalman_filter</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_autosummary/gncpy/filters/gncpy.filters.gci_filter.html">gci_filter</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_autosummary/gncpy/filters/gncpy.filters.gsm_filter_base.html">gsm_filter_base</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_autosummary/gncpy/filters/gncpy.filters.imm_gci_filter.html">imm_gci_filter</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_autosummary/gncpy/filters/gncpy.filters.interacting_multiple_model.html">interacting_multiple_model</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_autosummary/gncpy/filters/gncpy.filters.kalman_filter.html">kalman_filter</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_autosummary/gncpy/filters/gncpy.filters.kf_gaussian_scale_mixture_filter.html">kf_gaussian_scale_mixture_filter</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_autosummary/gncpy/filters/gncpy.filters.max_corr_ent_ukf.html">max_corr_ent_ukf</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_autosummary/gncpy/filters/gncpy.filters.max_corr_ent_upf.html">max_corr_ent_upf</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_autosummary/gncpy/filters/gncpy.filters.mcmc_particle_filter_base.html">mcmc_particle_filter_base</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_autosummary/gncpy/filters/gncpy.filters.particle_filter.html">particle_filter</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_autosummary/gncpy/filters/gncpy.filters.qkf_gaussian_scale_mixture_filter.html">qkf_gaussian_scale_mixture_filter</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_autosummary/gncpy/filters/gncpy.filters.quadrature_kalman_filter.html">quadrature_kalman_filter</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_autosummary/gncpy/filters/gncpy.filters.sqkf_gaussian_scale_mixture_filter.html">sqkf_gaussian_scale_mixture_filter</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_autosummary/gncpy/filters/gncpy.filters.square_root_qkf.html">square_root_qkf</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_autosummary/gncpy/filters/gncpy.filters.students_t_filter.html">students_t_filter</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_autosummary/gncpy/filters/gncpy.filters.ukf_gaussian_scale_mixture_filter.html">ukf_gaussian_scale_mixture_filter</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_autosummary/gncpy/filters/gncpy.filters.unscented_kalman_filter.html">unscented_kalman_filter</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_autosummary/gncpy/filters/gncpy.filters.unscented_particle_filter.html">unscented_particle_filter</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../_autosummary/gncpy/gncpy.game_engine.html">game_engine</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../_autosummary/gncpy/game_engine/gncpy.game_engine.base_game.html">base_game</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_autosummary/gncpy/game_engine/gncpy.game_engine.components.html">components</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_autosummary/gncpy/game_engine/gncpy.game_engine.entities.html">entities</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_autosummary/gncpy/game_engine/gncpy.game_engine.physics2d.html">physics2d</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_autosummary/gncpy/game_engine/gncpy.game_engine.rendering2d.html">rendering2d</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../_autosummary/gncpy/gncpy.games.html">games</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../_autosummary/gncpy/games/gncpy.games.SimpleUAV2d.html">SimpleUAV2d</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../_autosummary/gncpy/gncpy.math.html">math</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../_autosummary/gncpy/math/gncpy.math.epanechnikov_kernel.html">gncpy.math.epanechnikov_kernel</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_autosummary/gncpy/math/gncpy.math.gamma_fnc.html">gncpy.math.gamma_fnc</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_autosummary/gncpy/math/gncpy.math.gaussian_kernel.html">gncpy.math.gaussian_kernel</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_autosummary/gncpy/math/gncpy.math.get_elem_sym_fnc.html">gncpy.math.get_elem_sym_fnc</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_autosummary/gncpy/math/gncpy.math.get_hessian.html">gncpy.math.get_hessian</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_autosummary/gncpy/math/gncpy.math.get_input_jacobian.html">gncpy.math.get_input_jacobian</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_autosummary/gncpy/math/gncpy.math.get_jacobian.html">gncpy.math.get_jacobian</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_autosummary/gncpy/math/gncpy.math.get_state_jacobian.html">gncpy.math.get_state_jacobian</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_autosummary/gncpy/math/gncpy.math.log_sum_exp.html">gncpy.math.log_sum_exp</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_autosummary/gncpy/math/gncpy.math.rk4.html">gncpy.math.rk4</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_autosummary/gncpy/math/gncpy.math.rk4_backward.html">gncpy.math.rk4_backward</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_autosummary/gncpy/math/gncpy.math.weighted_sum_mat.html">gncpy.math.weighted_sum_mat</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_autosummary/gncpy/math/gncpy.math.weighted_sum_vec.html">gncpy.math.weighted_sum_vec</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../_autosummary/gncpy/gncpy.measurements.html">measurements</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../_autosummary/gncpy/gncpy.orbital_mechanics.html">orbital_mechanics</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../_autosummary/gncpy/orbital_mechanics/gncpy.orbital_mechanics.correct_lon_ascend.html">gncpy.orbital_mechanics.correct_lon_ascend</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_autosummary/gncpy/orbital_mechanics/gncpy.orbital_mechanics.ecc_anom_from_mean.html">gncpy.orbital_mechanics.ecc_anom_from_mean</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_autosummary/gncpy/orbital_mechanics/gncpy.orbital_mechanics.ecef_from_orbit.html">gncpy.orbital_mechanics.ecef_from_orbit</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_autosummary/gncpy/orbital_mechanics/gncpy.orbital_mechanics.true_anom_from_ecc.html">gncpy.orbital_mechanics.true_anom_from_ecc</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../_autosummary/gncpy/gncpy.planning.html">planning</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../_autosummary/gncpy/planning/gncpy.planning.a_star.html">a_star</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_autosummary/gncpy/planning/gncpy.planning.reinforcement_learning.html">reinforcement_learning</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_autosummary/gncpy/planning/gncpy.planning.rrt_star.html">rrt_star</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../_autosummary/gncpy/gncpy.plotting.html">plotting</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../_autosummary/gncpy/plotting/gncpy.plotting.calc_error_ellipse.html">gncpy.plotting.calc_error_ellipse</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_autosummary/gncpy/plotting/gncpy.plotting.get_cmap.html">gncpy.plotting.get_cmap</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_autosummary/gncpy/plotting/gncpy.plotting.init_plotting_opts.html">gncpy.plotting.init_plotting_opts</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_autosummary/gncpy/plotting/gncpy.plotting.set_title_label.html">gncpy.plotting.set_title_label</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../_autosummary/gncpy/gncpy.sampling.html">sampling</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../_autosummary/gncpy/sampling/gncpy.sampling.MetropolisHastings.html">MetropolisHastings</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../_autosummary/gncpy/gncpy.utilities.html">utilities</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../_autosummary/gncpy/utilities/gncpy.utilities.classproperty.html">gncpy.utilities.classproperty</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_autosummary/gncpy/utilities/gncpy.utilities.ClassPropertyDescriptor.html">ClassPropertyDescriptor</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_autosummary/gncpy/utilities/gncpy.utilities.ClassPropertyMetaClass.html">ClassPropertyMetaClass</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../_autosummary/gncpy/gncpy.wgs84.html">wgs84</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../_autosummary/gncpy/wgs84/gncpy.wgs84.calc_earth_rate.html">gncpy.wgs84.calc_earth_rate</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_autosummary/gncpy/wgs84/gncpy.wgs84.calc_ew_rad.html">gncpy.wgs84.calc_ew_rad</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_autosummary/gncpy/wgs84/gncpy.wgs84.calc_gravity.html">gncpy.wgs84.calc_gravity</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_autosummary/gncpy/wgs84/gncpy.wgs84.calc_ns_rad.html">gncpy.wgs84.calc_ns_rad</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_autosummary/gncpy/wgs84/gncpy.wgs84.calc_transport_rate.html">gncpy.wgs84.calc_transport_rate</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_autosummary/gncpy/wgs84/gncpy.wgs84.convert_msl_to_wgs.html">gncpy.wgs84.convert_msl_to_wgs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_autosummary/gncpy/wgs84/gncpy.wgs84.convert_wgs_to_msl.html">gncpy.wgs84.convert_wgs_to_msl</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../_autosummary/gncpy/wgs84/gncpy.wgs84.init_egm_lookup_table.html">gncpy.wgs84.init_egm_lookup_table</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../usage.html">Usage</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../usage/control.html">Control Examples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../usage/control.html#lqr-infinite-horizon-linear-dyanmics">LQR Infinite Horizon Linear Dyanmics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../usage/control.html#lqr-finite-horzon-linear-dynamics">LQR Finite Horzon Linear Dynamics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../usage/control.html#lqr-finite-horzon-non-linear-dynamics">LQR Finite Horzon Non-linear Dynamics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../usage/control.html#elqr">ELQR</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../usage/control.html#elqr-modified-quadratization">ELQR Modified Quadratization</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../usage/control.html#elqr-linear-dynamics">ELQR Linear Dynamics</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../usage/filters.html">Filter Examples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../usage/filters.html#kalman-filter">Kalman Filter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../usage/filters.html#extended-kalman-filter">Extended Kalman Filter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../usage/filters.html#interacting-multiple-model-filter">Interacting Multiple Model Filter</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../usage/planning.html">Planning Examples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../usage/a_star.html">A* Examples</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../usage/a_star.html#normal-a">Normal A*</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../usage/a_star.html#beam-search">Beam Search</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../usage/a_star.html#weighted-a">Weighted A*</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../usage/rrtstar.html">RRT* Examples</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../usage/rrtstar.html#lqr-rrt-with-linear-dynamics">LQR-RRT* with Linear Dynamics</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../usage/rrtstar.html#lqr-rrt-with-non-linear-dynamics">LQR-RRT* with Non-Linear Dynamics</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../usage/rrtstar.html#elqr-rrt-with-non-linear-dynamics">ELQR-RRT* with Non-Linear Dynamics</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../toolchain.html">Toolchain</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../toolchain.html#development-environment-setup">Development Environment Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../toolchain.html#example-workflow">Example Workflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../toolchain.html#notes-on-tox">Notes on tox</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../cicd.html">CI/CD Pipeline</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../cicd.html#github-actions-quick-guide">Github Actions Quick Guide</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference external" href="./reports/coverage/index.html#http://">Test Coverage Report</a></li>
<li class="toctree-l1"><a class="reference external" href="./reports/junit/junit.html#http://">Test Results Report</a></li>
<li class="toctree-l1"><a class="reference external" href="http://lager.ua.edu/">LAGER Homepage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../References.html">References</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../license.html">License</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #9E1B32" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">GNCPy</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../index.html">Module code</a></li>
      <li class="breadcrumb-item active">gncpy.games.SimpleUAV2d</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for gncpy.games.SimpleUAV2d</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;Implements the SimpleUAV2d game.</span>

<span class="sd">Included configuration files for this game are:</span>

<span class="sd">    * SimpleUAV2d.yaml</span>
<span class="sd">    * SimpleUAVHazards2d.yaml</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">enum</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">gncpy.dynamics.basic</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">gdyn</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">gncpy.game_engine.physics2d</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">gphysics</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">gncpy.game_engine.components</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">gcomp</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">gncpy.game_engine.base_game</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">BaseGame2d</span><span class="p">,</span>
    <span class="n">Base2dParams</span><span class="p">,</span>
    <span class="n">Shape2dParams</span><span class="p">,</span>
    <span class="n">Collision2dParams</span><span class="p">,</span>
<span class="p">)</span>


<div class="viewcode-block" id="BirthModelParams">
<a class="viewcode-back" href="../../../_autosummary/gncpy/games/SimpleUAV2d/gncpy.games.SimpleUAV2d.BirthModelParams.html#gncpy.games.SimpleUAV2d.BirthModelParams">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">BirthModelParams</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Parameters for the birth model to be parsed by the yaml parser.</span>

<span class="sd">    The types defined in this class determine what type the parser uses.</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    type : string</span>
<span class="sd">        type of score system to use. Options are defined by</span>
<span class="sd">        :class:`gncpy.game_engine.components.CBirth`.</span>
<span class="sd">    extra_params : dict</span>
<span class="sd">        Extra parameters for the birth model. Varies depending on the type.</span>
<span class="sd">    location : numpy array</span>
<span class="sd">        Either just x/y position or full state length. Location parameter for</span>
<span class="sd">        the birth distribution.</span>
<span class="sd">    scale : numpy array</span>
<span class="sd">        Must be of appropriate dimension for the location. Scale parameter for</span>
<span class="sd">        the birth distrbution.</span>
<span class="sd">    randomize : bool</span>
<span class="sd">        Flag indicating if a random sample should be drawn from the birth</span>
<span class="sd">        distribution. This does not affect birth time.</span>
<span class="sd">    times : numpy array</span>
<span class="sd">        Birth times for object, these do not need to align with a game step time.</span>
<span class="sd">        If no value is provided then a probability must be given.</span>
<span class="sd">    prob : float</span>
<span class="sd">        Probability of birth at every time step. Only used if no times are given.</span>
<span class="sd">        Must be in the range (0, 1].</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="BirthModelParams.__init__">
<a class="viewcode-back" href="../../../_autosummary/gncpy/games/SimpleUAV2d/gncpy.games.SimpleUAV2d.BirthModelParams.html#gncpy.games.SimpleUAV2d.BirthModelParams.__init__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">extra_params</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">location</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scale</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([])</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">randomize</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">times</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">prob</span> <span class="o">=</span> <span class="mi">0</span></div>
</div>



<div class="viewcode-block" id="ControlModelParams">
<a class="viewcode-back" href="../../../_autosummary/gncpy/games/SimpleUAV2d/gncpy.games.SimpleUAV2d.ControlModelParams.html#gncpy.games.SimpleUAV2d.ControlModelParams">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">ControlModelParams</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Parameters for the birth model to be parsed by the yaml parser.</span>

<span class="sd">    The types defined in this class determine what type the parser uses.</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    type : string</span>
<span class="sd">        type of control model to use. Options are dependent on the dynamics type.</span>
<span class="sd">        For :code:`&#39;DoubleIntegrator&#39;` dynamics, options are :code:`&#39;velocity&#39;`.</span>
<span class="sd">        For :code:`&#39;CoordinatedTurn&#39;` dynamics, options are :code:`&#39;velocity_turn&#39;`.</span>
<span class="sd">    max_vel : float</span>
<span class="sd">        Maximum velocity for x/y components. Must be set for coordinated turn</span>
<span class="sd">        :code:`&#39;velocity_turn&#39;` type. Only used by double integrator</span>
<span class="sd">        :code:`&#39;velocity&#39;` type if max_vel_x and max_vel_y not set.</span>
<span class="sd">    max_vel_x : float</span>
<span class="sd">        Maximum velocity in the x direction. Used by double integrator</span>
<span class="sd">        :code:`&#39;velocity&#39;`.</span>
<span class="sd">    max_vel_y : float</span>
<span class="sd">        Maximum velocity in the y direction. Used by double integrator</span>
<span class="sd">        :code:`&#39;velocity&#39;`.</span>
<span class="sd">    max_turn_rate : float</span>
<span class="sd">        Maximum turn rate. Used by coordinated turn :code:`&#39;velocity_turn&#39;`.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="ControlModelParams.__init__">
<a class="viewcode-back" href="../../../_autosummary/gncpy/games/SimpleUAV2d/gncpy.games.SimpleUAV2d.ControlModelParams.html#gncpy.games.SimpleUAV2d.ControlModelParams.__init__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">max_vel</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">max_vel_x</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">max_vel_y</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">max_turn_rate</span> <span class="o">=</span> <span class="kc">None</span></div>
</div>



<div class="viewcode-block" id="StateConstraintParams">
<a class="viewcode-back" href="../../../_autosummary/gncpy/games/SimpleUAV2d/gncpy.games.SimpleUAV2d.StateConstraintParams.html#gncpy.games.SimpleUAV2d.StateConstraintParams">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">StateConstraintParams</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Parameters for the state constraints to be parsed by the yaml parser.</span>

<span class="sd">    The types defined in this class determine what type the parser uses.</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    type : string</span>
<span class="sd">        Type of control model to use. Options are :code:`&#39;none&#39;` or</span>
<span class="sd">        :code:`&#39;velocity&#39;`.</span>
<span class="sd">    min_vels : numpy array</span>
<span class="sd">        Minimum x/y velocity.</span>
<span class="sd">    max_vels : numpy array</span>
<span class="sd">        Maximum x/y velocity.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="StateConstraintParams.__init__">
<a class="viewcode-back" href="../../../_autosummary/gncpy/games/SimpleUAV2d/gncpy.games.SimpleUAV2d.StateConstraintParams.html#gncpy.games.SimpleUAV2d.StateConstraintParams.__init__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">min_vels</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">max_vels</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([])</span></div>
</div>



<div class="viewcode-block" id="DynamicsParams">
<a class="viewcode-back" href="../../../_autosummary/gncpy/games/SimpleUAV2d/gncpy.games.SimpleUAV2d.DynamicsParams.html#gncpy.games.SimpleUAV2d.DynamicsParams">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">DynamicsParams</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Parameters for the state constraints to be parsed by the yaml parser.</span>

<span class="sd">    The types defined in this class determine what type the parser uses.</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    type : string</span>
<span class="sd">        Type of control model to use. Options are :code:`&#39;DoubleIntegrator&#39;` or</span>
<span class="sd">        :code:`&#39;CoordinatedTurn&#39;`. See :mod:`gncpy.dynamics.basic` for details</span>
<span class="sd">        on the dynamics.</span>
<span class="sd">    extra_params : dict</span>
<span class="sd">        Extra parameters for the dynamics object. Varies depending on the type.</span>
<span class="sd">    controlModel : :class:`.ControlModelParams`</span>
<span class="sd">        Parameters for the control model.</span>
<span class="sd">    stateConstraint : :class:`.StateConstraintParams`</span>
<span class="sd">        Parameters for the state constraints.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="DynamicsParams.__init__">
<a class="viewcode-back" href="../../../_autosummary/gncpy/games/SimpleUAV2d/gncpy.games.SimpleUAV2d.DynamicsParams.html#gncpy.games.SimpleUAV2d.DynamicsParams.__init__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">extra_params</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">controlModel</span> <span class="o">=</span> <span class="n">ControlModelParams</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stateConstraint</span> <span class="o">=</span> <span class="n">StateConstraintParams</span><span class="p">()</span></div>
</div>



<div class="viewcode-block" id="PlayerParams">
<a class="viewcode-back" href="../../../_autosummary/gncpy/games/SimpleUAV2d/gncpy.games.SimpleUAV2d.PlayerParams.html#gncpy.games.SimpleUAV2d.PlayerParams">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">PlayerParams</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Parameters for a player object to be parsed by the yaml parser.</span>

<span class="sd">    The types defined in this class determine what type the parser uses.</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    birth : :class:`.BirthModelParams`</span>
<span class="sd">        Parametrs for the birth model</span>
<span class="sd">    dynamics : :class:`.DynamicsParams`</span>
<span class="sd">        Parameters for the dynamics model.</span>
<span class="sd">    shape : :class:`gncpy.game_engine.rendering2d.Shape2dParams`</span>
<span class="sd">        Parameters for the shape.</span>
<span class="sd">    collision : :class`gncpy.game_engine.physics2d.Collision2dParams`</span>
<span class="sd">        Parameters for the collision bounding box.</span>
<span class="sd">    capabilities : list</span>
<span class="sd">        Each element is a string representing some capability of the player.</span>
<span class="sd">        Allows for modeling additional hardware some targets may require to</span>
<span class="sd">        get successful &quot;hit&quot;.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="PlayerParams.__init__">
<a class="viewcode-back" href="../../../_autosummary/gncpy/games/SimpleUAV2d/gncpy.games.SimpleUAV2d.PlayerParams.html#gncpy.games.SimpleUAV2d.PlayerParams.__init__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">birth</span> <span class="o">=</span> <span class="n">BirthModelParams</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dynamics</span> <span class="o">=</span> <span class="n">DynamicsParams</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">shape</span> <span class="o">=</span> <span class="n">Shape2dParams</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">collision</span> <span class="o">=</span> <span class="n">Collision2dParams</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">capabilities</span> <span class="o">=</span> <span class="p">[]</span></div>
</div>



<div class="viewcode-block" id="ObstacleParams">
<a class="viewcode-back" href="../../../_autosummary/gncpy/games/SimpleUAV2d/gncpy.games.SimpleUAV2d.ObstacleParams.html#gncpy.games.SimpleUAV2d.ObstacleParams">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">ObstacleParams</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Parameters for an obstacle object to be parsed by the yaml parser.</span>

<span class="sd">    The types defined in this class determine what type the parser uses.</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    loc_x : float</span>
<span class="sd">        X location of the center in real units.</span>
<span class="sd">    loc_y : float</span>
<span class="sd">        Y location of the center in real units.</span>
<span class="sd">    shape : :class:`gncpy.game_engine.rendering2d.Shape2dParams`</span>
<span class="sd">        Parameters for the shape.</span>
<span class="sd">    collision : :class`gncpy.game_engine.physics2d.Collision2dParams`</span>
<span class="sd">        Parameters for the collision bounding box.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="ObstacleParams.__init__">
<a class="viewcode-back" href="../../../_autosummary/gncpy/games/SimpleUAV2d/gncpy.games.SimpleUAV2d.ObstacleParams.html#gncpy.games.SimpleUAV2d.ObstacleParams.__init__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">loc_x</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">loc_y</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">shape</span> <span class="o">=</span> <span class="n">Shape2dParams</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">collision</span> <span class="o">=</span> <span class="n">Collision2dParams</span><span class="p">()</span></div>
</div>



<div class="viewcode-block" id="TargetParams">
<a class="viewcode-back" href="../../../_autosummary/gncpy/games/SimpleUAV2d/gncpy.games.SimpleUAV2d.TargetParams.html#gncpy.games.SimpleUAV2d.TargetParams">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">TargetParams</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Parameters for a target object to be parsed by the yaml parser.</span>

<span class="sd">    The types defined in this class determine what type the parser uses.</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    loc_x : float</span>
<span class="sd">        X location of the center in real units.</span>
<span class="sd">    loc_y : float</span>
<span class="sd">        Y location of the center in real units.</span>
<span class="sd">    shape : :class:`gncpy.game_engine.rendering2d.Shape2dParams`</span>
<span class="sd">        Parameters for the shape.</span>
<span class="sd">    collision : :class`gncpy.game_engine.physics2d.Collision2dParams`</span>
<span class="sd">        Parameters for the collision bounding box.</span>
<span class="sd">    capabilities : list</span>
<span class="sd">        Each element is a string representing some capability required by the</span>
<span class="sd">        target. When a player collides with a target, the more capabilities that</span>
<span class="sd">        match the better the score.</span>
<span class="sd">    priority : float</span>
<span class="sd">        Relative importance of reaching this target.</span>
<span class="sd">    order : int</span>
<span class="sd">        Order to reach this target reltive to other targets. Must be &gt;= 0. All</span>
<span class="sd">        targets with the same order will be available at the same time.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="TargetParams.__init__">
<a class="viewcode-back" href="../../../_autosummary/gncpy/games/SimpleUAV2d/gncpy.games.SimpleUAV2d.TargetParams.html#gncpy.games.SimpleUAV2d.TargetParams.__init__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">loc_x</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">loc_y</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">shape</span> <span class="o">=</span> <span class="n">Shape2dParams</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">collision</span> <span class="o">=</span> <span class="n">Collision2dParams</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">capabilities</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">priority</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">order</span> <span class="o">=</span> <span class="mi">0</span></div>
</div>



<div class="viewcode-block" id="HazardParams">
<a class="viewcode-back" href="../../../_autosummary/gncpy/games/SimpleUAV2d/gncpy.games.SimpleUAV2d.HazardParams.html#gncpy.games.SimpleUAV2d.HazardParams">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">HazardParams</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Parameters for a hazard object to be parsed by the yaml parser.</span>

<span class="sd">    The types defined in this class determine what type the parser uses.</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    loc_x : float</span>
<span class="sd">        X location of the center in real units.</span>
<span class="sd">    loc_y : float</span>
<span class="sd">        Y location of the center in real units.</span>
<span class="sd">    shape : :class:`gncpy.game_engine.rendering2d.Shape2dParams`</span>
<span class="sd">        Parameters for the shape.</span>
<span class="sd">    collision : :class`gncpy.game_engine.physics2d.Collision2dParams`</span>
<span class="sd">        Parameters for the collision bounding box.</span>
<span class="sd">    prob_of_death : float</span>
<span class="sd">        Probability of dying for each timestep in the hazard. Must be in the</span>
<span class="sd">        range [0, 1].</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="HazardParams.__init__">
<a class="viewcode-back" href="../../../_autosummary/gncpy/games/SimpleUAV2d/gncpy.games.SimpleUAV2d.HazardParams.html#gncpy.games.SimpleUAV2d.HazardParams.__init__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">loc_x</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">loc_y</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">shape</span> <span class="o">=</span> <span class="n">Shape2dParams</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">collision</span> <span class="o">=</span> <span class="n">Collision2dParams</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">prob_of_death</span> <span class="o">=</span> <span class="mi">0</span></div>
</div>



<div class="viewcode-block" id="ScoreParams">
<a class="viewcode-back" href="../../../_autosummary/gncpy/games/SimpleUAV2d/gncpy.games.SimpleUAV2d.ScoreParams.html#gncpy.games.SimpleUAV2d.ScoreParams">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">ScoreParams</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Parameters for the score system to be parsed by the yaml parser.</span>

<span class="sd">    The types defined in this class determine what type the parser uses.</span>
<span class="sd">    See :meth:`.SimpleUAV2d.s_score` for details on what these terms mean for</span>
<span class="sd">    specific score systems.</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    type : string</span>
<span class="sd">        Type of control model to use. Options are :code:`&#39;basic&#39;`.</span>
<span class="sd">    hazard_multiplier : float</span>
<span class="sd">        Multiplier for the base hazard term.</span>
<span class="sd">    death_scale : float</span>
<span class="sd">        Scaling factor fo the death term.</span>
<span class="sd">    death_decay : float</span>
<span class="sd">        Decay factor for the death term.</span>
<span class="sd">    death_penalty : float</span>
<span class="sd">        Additional penalty for death.</span>
<span class="sd">    time_penalty : float</span>
<span class="sd">        Time penalty.</span>
<span class="sd">    missed_multiplier : float</span>
<span class="sd">        Multiplier for missing targets</span>
<span class="sd">    wall_penalty : float</span>
<span class="sd">        Penalty for hitting obstacles</span>
<span class="sd">    vel_penalty : float</span>
<span class="sd">        Penalty for having extreme velocity</span>
<span class="sd">    min_vel_per : float</span>
<span class="sd">        Minimum velocity as a percentage of the magnitude. Must be in range</span>
<span class="sd">        [0, 1].</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="ScoreParams.__init__">
<a class="viewcode-back" href="../../../_autosummary/gncpy/games/SimpleUAV2d/gncpy.games.SimpleUAV2d.ScoreParams.html#gncpy.games.SimpleUAV2d.ScoreParams.__init__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="s2">&quot;basic&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hazard_multiplier</span> <span class="o">=</span> <span class="mi">2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">death_scale</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">death_decay</span> <span class="o">=</span> <span class="mf">0.05</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">death_penalty</span> <span class="o">=</span> <span class="mi">100</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">time_penalty</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">missed_multiplier</span> <span class="o">=</span> <span class="mi">5</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">target_multiplier</span> <span class="o">=</span> <span class="mi">50</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wall_penalty</span> <span class="o">=</span> <span class="mi">2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vel_penalty</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">min_vel_per</span> <span class="o">=</span> <span class="mf">0.2</span></div>
</div>



<div class="viewcode-block" id="Params">
<a class="viewcode-back" href="../../../_autosummary/gncpy/games/SimpleUAV2d/gncpy.games.SimpleUAV2d.Params.html#gncpy.games.SimpleUAV2d.Params">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">Params</span><span class="p">(</span><span class="n">Base2dParams</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Main set of parameters to be parsed by the yaml parser.</span>

<span class="sd">    The types defined in this class determine what type the parser uses.</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    players : list</span>
<span class="sd">        Each element is a :class:`.PlayerParams` object.</span>
<span class="sd">    targets : list</span>
<span class="sd">        Each element is a :class:`.TargetParams` object.</span>
<span class="sd">    obstacles : list</span>
<span class="sd">        Each element is a :class:`.ObstacleParams` object.</span>
<span class="sd">    hazards : list</span>
<span class="sd">        Each element is a :class:`.HazardsParams` object.</span>
<span class="sd">    score : :class:`.ScoreParams`</span>
<span class="sd">        Parameters for the score system.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="Params.__init__">
<a class="viewcode-back" href="../../../_autosummary/gncpy/games/SimpleUAV2d/gncpy.games.SimpleUAV2d.Params.html#gncpy.games.SimpleUAV2d.Params.__init__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">players</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">targets</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">obstacles</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hazards</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">score</span> <span class="o">=</span> <span class="n">ScoreParams</span><span class="p">()</span></div>
</div>



<div class="viewcode-block" id="EventType">
<a class="viewcode-back" href="../../../_autosummary/gncpy/games/SimpleUAV2d/gncpy.games.SimpleUAV2d.EventType.html#gncpy.games.SimpleUAV2d.EventType">[docs]</a>
<span class="nd">@enum</span><span class="o">.</span><span class="n">unique</span>
<span class="k">class</span><span class="w"> </span><span class="nc">EventType</span><span class="p">(</span><span class="n">enum</span><span class="o">.</span><span class="n">Enum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Define the different types of events in the game.&quot;&quot;&quot;</span>

    <span class="n">HAZARD</span> <span class="o">=</span> <span class="n">enum</span><span class="o">.</span><span class="n">auto</span><span class="p">()</span>
    <span class="n">DEATH</span> <span class="o">=</span> <span class="n">enum</span><span class="o">.</span><span class="n">auto</span><span class="p">()</span>
    <span class="n">TARGET</span> <span class="o">=</span> <span class="n">enum</span><span class="o">.</span><span class="n">auto</span><span class="p">()</span>
    <span class="n">OBSTACLE</span> <span class="o">=</span> <span class="n">enum</span><span class="o">.</span><span class="n">auto</span><span class="p">()</span>
    <span class="n">COL_PLAYER</span> <span class="o">=</span> <span class="n">enum</span><span class="o">.</span><span class="n">auto</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the enum name for strings.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span></div>



<div class="viewcode-block" id="SimpleUAV2d">
<a class="viewcode-back" href="../../../_autosummary/gncpy/games/SimpleUAV2d/gncpy.games.SimpleUAV2d.SimpleUAV2d.html#gncpy.games.SimpleUAV2d.SimpleUAV2d">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">SimpleUAV2d</span><span class="p">(</span><span class="n">BaseGame2d</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Simple 2D UAV game.</span>

<span class="sd">    Assumes obstacles and hazards are static, and all players have the same</span>
<span class="sd">    state and action spaces.</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    cur_target_seq : int</span>
<span class="sd">        Current index into the target_seq list.</span>
<span class="sd">    target_seq : list</span>
<span class="sd">        Each element is an order value from the target parameters, only has</span>
<span class="sd">        unique values and is sorted in ascending order.</span>
<span class="sd">    all_capabilities : list</span>
<span class="sd">        Each element is a string, holds all (unique) possible values from target</span>
<span class="sd">        and player capabilities.</span>
<span class="sd">    has_random_player_birth_times : bool</span>
<span class="sd">        Flag indicating if any player can have random birth times.</span>
<span class="sd">    max_player_birth_time : float</span>
<span class="sd">        Maximum time a new player can be born.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="SimpleUAV2d.__init__">
<a class="viewcode-back" href="../../../_autosummary/gncpy/games/SimpleUAV2d/gncpy.games.SimpleUAV2d.SimpleUAV2d.html#gncpy.games.SimpleUAV2d.SimpleUAV2d.__init__">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config_file</span><span class="p">,</span> <span class="n">render_mode</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize an object.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        config_file : string</span>
<span class="sd">            Full path of the configuratin file.</span>
<span class="sd">        render_mode : string</span>
<span class="sd">            Mode to render the game.</span>
<span class="sd">        **kwargs : dict</span>
<span class="sd">            Additional arguments for the parent classes.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">config_file</span><span class="p">,</span> <span class="n">render_mode</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">cur_target_seq</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">target_seq</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">all_capabilities</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">has_random_player_birth_times</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">max_player_birth_time</span> <span class="o">=</span> <span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">inf</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_performed_reset_spawn</span> <span class="o">=</span> <span class="kc">False</span></div>


<div class="viewcode-block" id="SimpleUAV2d.register_params">
<a class="viewcode-back" href="../../../_autosummary/gncpy/games/SimpleUAV2d/gncpy.games.SimpleUAV2d.SimpleUAV2d.html#gncpy.games.SimpleUAV2d.SimpleUAV2d.register_params">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">register_params</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">yaml</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Register custom classes for this game with the yaml parser.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        yaml : ruamel.yaml YAML object</span>
<span class="sd">            yaml parser to use.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">register_params</span><span class="p">(</span><span class="n">yaml</span><span class="p">)</span>
        <span class="n">yaml</span><span class="o">.</span><span class="n">register_class</span><span class="p">(</span><span class="n">ScoreParams</span><span class="p">)</span>
        <span class="n">yaml</span><span class="o">.</span><span class="n">register_class</span><span class="p">(</span><span class="n">BirthModelParams</span><span class="p">)</span>
        <span class="n">yaml</span><span class="o">.</span><span class="n">register_class</span><span class="p">(</span><span class="n">ControlModelParams</span><span class="p">)</span>
        <span class="n">yaml</span><span class="o">.</span><span class="n">register_class</span><span class="p">(</span><span class="n">StateConstraintParams</span><span class="p">)</span>
        <span class="n">yaml</span><span class="o">.</span><span class="n">register_class</span><span class="p">(</span><span class="n">DynamicsParams</span><span class="p">)</span>
        <span class="n">yaml</span><span class="o">.</span><span class="n">register_class</span><span class="p">(</span><span class="n">PlayerParams</span><span class="p">)</span>
        <span class="n">yaml</span><span class="o">.</span><span class="n">register_class</span><span class="p">(</span><span class="n">ObstacleParams</span><span class="p">)</span>
        <span class="n">yaml</span><span class="o">.</span><span class="n">register_class</span><span class="p">(</span><span class="n">TargetParams</span><span class="p">)</span>
        <span class="n">yaml</span><span class="o">.</span><span class="n">register_class</span><span class="p">(</span><span class="n">HazardParams</span><span class="p">)</span>
        <span class="n">yaml</span><span class="o">.</span><span class="n">register_class</span><span class="p">(</span><span class="n">ScoreParams</span><span class="p">)</span>
        <span class="n">yaml</span><span class="o">.</span><span class="n">register_class</span><span class="p">(</span><span class="n">Params</span><span class="p">)</span></div>


<div class="viewcode-block" id="SimpleUAV2d.create_obstacles">
<a class="viewcode-back" href="../../../_autosummary/gncpy/games/SimpleUAV2d/gncpy.games.SimpleUAV2d.SimpleUAV2d.html#gncpy.games.SimpleUAV2d.SimpleUAV2d.create_obstacles">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">create_obstacles</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates all obstacles based on config values.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">params</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">obstacles</span><span class="p">:</span>
            <span class="n">e</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">entityManager</span><span class="o">.</span><span class="n">add_entity</span><span class="p">(</span><span class="s2">&quot;obstacle&quot;</span><span class="p">)</span>

            <span class="n">e</span><span class="o">.</span><span class="n">add_component</span><span class="p">(</span><span class="n">gcomp</span><span class="o">.</span><span class="n">CTransform</span><span class="p">)</span>
            <span class="n">c_transform</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">get_component</span><span class="p">(</span><span class="n">gcomp</span><span class="o">.</span><span class="n">CTransform</span><span class="p">)</span>
            <span class="n">c_transform</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">gphysics</span><span class="o">.</span><span class="n">dist_to_pixels</span><span class="p">(</span>
                <span class="n">params</span><span class="o">.</span><span class="n">loc_x</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">dist_per_pix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                <span class="n">min_pos</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">physics</span><span class="o">.</span><span class="n">min_pos</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
            <span class="p">)</span>
            <span class="n">c_transform</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">gphysics</span><span class="o">.</span><span class="n">dist_to_pixels</span><span class="p">(</span>
                <span class="n">params</span><span class="o">.</span><span class="n">loc_y</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">dist_per_pix</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
                <span class="n">min_pos</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">physics</span><span class="o">.</span><span class="n">min_pos</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
            <span class="p">)</span>
            <span class="n">c_transform</span><span class="o">.</span><span class="n">last_pos</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">c_transform</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">c_transform</span><span class="o">.</span><span class="n">last_pos</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">c_transform</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

            <span class="n">e</span><span class="o">.</span><span class="n">add_component</span><span class="p">(</span>
                <span class="n">gcomp</span><span class="o">.</span><span class="n">CShape</span><span class="p">,</span>
                <span class="n">s_type</span><span class="o">=</span><span class="n">params</span><span class="o">.</span><span class="n">shape</span><span class="o">.</span><span class="n">type</span><span class="p">,</span>
                <span class="n">w</span><span class="o">=</span><span class="n">gphysics</span><span class="o">.</span><span class="n">dist_to_pixels</span><span class="p">(</span><span class="n">params</span><span class="o">.</span><span class="n">shape</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dist_per_pix</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
                <span class="n">h</span><span class="o">=</span><span class="n">gphysics</span><span class="o">.</span><span class="n">dist_to_pixels</span><span class="p">(</span><span class="n">params</span><span class="o">.</span><span class="n">shape</span><span class="o">.</span><span class="n">height</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dist_per_pix</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span>
                <span class="n">color</span><span class="o">=</span><span class="n">params</span><span class="o">.</span><span class="n">shape</span><span class="o">.</span><span class="n">color</span><span class="p">,</span>
                <span class="n">zorder</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
                <span class="n">fpath</span><span class="o">=</span><span class="n">params</span><span class="o">.</span><span class="n">shape</span><span class="o">.</span><span class="n">file</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="k">if</span> <span class="n">params</span><span class="o">.</span><span class="n">collision</span><span class="o">.</span><span class="n">height</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">params</span><span class="o">.</span><span class="n">collision</span><span class="o">.</span><span class="n">width</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">e</span><span class="o">.</span><span class="n">add_component</span><span class="p">(</span>
                    <span class="n">gcomp</span><span class="o">.</span><span class="n">CCollision</span><span class="p">,</span>
                    <span class="n">w</span><span class="o">=</span><span class="n">gphysics</span><span class="o">.</span><span class="n">dist_to_pixels</span><span class="p">(</span>
                        <span class="n">params</span><span class="o">.</span><span class="n">collision</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dist_per_pix</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="p">),</span>
                    <span class="n">h</span><span class="o">=</span><span class="n">gphysics</span><span class="o">.</span><span class="n">dist_to_pixels</span><span class="p">(</span>
                        <span class="n">params</span><span class="o">.</span><span class="n">collision</span><span class="o">.</span><span class="n">height</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dist_per_pix</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                    <span class="p">),</span>
                <span class="p">)</span></div>


<div class="viewcode-block" id="SimpleUAV2d.create_hazards">
<a class="viewcode-back" href="../../../_autosummary/gncpy/games/SimpleUAV2d/gncpy.games.SimpleUAV2d.SimpleUAV2d.html#gncpy.games.SimpleUAV2d.SimpleUAV2d.create_hazards">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">create_hazards</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates all hazards based on config values.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">params</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">hazards</span><span class="p">:</span>
            <span class="n">e</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">entityManager</span><span class="o">.</span><span class="n">add_entity</span><span class="p">(</span><span class="s2">&quot;hazard&quot;</span><span class="p">)</span>

            <span class="n">e</span><span class="o">.</span><span class="n">add_component</span><span class="p">(</span><span class="n">gcomp</span><span class="o">.</span><span class="n">CTransform</span><span class="p">)</span>
            <span class="n">c_transform</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">get_component</span><span class="p">(</span><span class="n">gcomp</span><span class="o">.</span><span class="n">CTransform</span><span class="p">)</span>
            <span class="n">c_transform</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">gphysics</span><span class="o">.</span><span class="n">dist_to_pixels</span><span class="p">(</span>
                <span class="n">params</span><span class="o">.</span><span class="n">loc_x</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">dist_per_pix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                <span class="n">min_pos</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">physics</span><span class="o">.</span><span class="n">min_pos</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
            <span class="p">)</span>
            <span class="n">c_transform</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">gphysics</span><span class="o">.</span><span class="n">dist_to_pixels</span><span class="p">(</span>
                <span class="n">params</span><span class="o">.</span><span class="n">loc_y</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">dist_per_pix</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
                <span class="n">min_pos</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">physics</span><span class="o">.</span><span class="n">min_pos</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
            <span class="p">)</span>
            <span class="n">c_transform</span><span class="o">.</span><span class="n">last_pos</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">c_transform</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">c_transform</span><span class="o">.</span><span class="n">last_pos</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">c_transform</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

            <span class="n">e</span><span class="o">.</span><span class="n">add_component</span><span class="p">(</span>
                <span class="n">gcomp</span><span class="o">.</span><span class="n">CShape</span><span class="p">,</span>
                <span class="n">s_type</span><span class="o">=</span><span class="n">params</span><span class="o">.</span><span class="n">shape</span><span class="o">.</span><span class="n">type</span><span class="p">,</span>
                <span class="n">w</span><span class="o">=</span><span class="n">gphysics</span><span class="o">.</span><span class="n">dist_to_pixels</span><span class="p">(</span><span class="n">params</span><span class="o">.</span><span class="n">shape</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dist_per_pix</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
                <span class="n">h</span><span class="o">=</span><span class="n">gphysics</span><span class="o">.</span><span class="n">dist_to_pixels</span><span class="p">(</span><span class="n">params</span><span class="o">.</span><span class="n">shape</span><span class="o">.</span><span class="n">height</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dist_per_pix</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span>
                <span class="n">color</span><span class="o">=</span><span class="n">params</span><span class="o">.</span><span class="n">shape</span><span class="o">.</span><span class="n">color</span><span class="p">,</span>
                <span class="n">zorder</span><span class="o">=-</span><span class="mi">100</span><span class="p">,</span>
                <span class="n">fpath</span><span class="o">=</span><span class="n">params</span><span class="o">.</span><span class="n">shape</span><span class="o">.</span><span class="n">file</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="k">if</span> <span class="n">params</span><span class="o">.</span><span class="n">collision</span><span class="o">.</span><span class="n">height</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">params</span><span class="o">.</span><span class="n">collision</span><span class="o">.</span><span class="n">width</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">e</span><span class="o">.</span><span class="n">add_component</span><span class="p">(</span>
                    <span class="n">gcomp</span><span class="o">.</span><span class="n">CCollision</span><span class="p">,</span>
                    <span class="n">w</span><span class="o">=</span><span class="n">gphysics</span><span class="o">.</span><span class="n">dist_to_pixels</span><span class="p">(</span>
                        <span class="n">params</span><span class="o">.</span><span class="n">collision</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dist_per_pix</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="p">),</span>
                    <span class="n">h</span><span class="o">=</span><span class="n">gphysics</span><span class="o">.</span><span class="n">dist_to_pixels</span><span class="p">(</span>
                        <span class="n">params</span><span class="o">.</span><span class="n">collision</span><span class="o">.</span><span class="n">height</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dist_per_pix</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                    <span class="p">),</span>
                <span class="p">)</span>

            <span class="n">pd</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">params</span><span class="o">.</span><span class="n">prob_of_death</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">pd</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">pd</span> <span class="o">=</span> <span class="n">pd</span> <span class="o">/</span> <span class="mf">100.0</span>
            <span class="n">e</span><span class="o">.</span><span class="n">add_component</span><span class="p">(</span><span class="n">gcomp</span><span class="o">.</span><span class="n">CHazard</span><span class="p">,</span> <span class="n">prob_of_death</span><span class="o">=</span><span class="n">pd</span><span class="p">)</span></div>


<div class="viewcode-block" id="SimpleUAV2d.create_targets">
<a class="viewcode-back" href="../../../_autosummary/gncpy/games/SimpleUAV2d/gncpy.games.SimpleUAV2d.SimpleUAV2d.html#gncpy.games.SimpleUAV2d.SimpleUAV2d.create_targets">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">create_targets</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates current targets based on config values.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        bool</span>
<span class="sd">            Flag indicating if targets were generated</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">entityManager</span><span class="o">.</span><span class="n">get_entities</span><span class="p">(</span><span class="s2">&quot;target&quot;</span><span class="p">))</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cur_target_seq</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cur_target_seq</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cur_target_seq</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cur_target_seq</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">target_seq</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="n">order</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">target_seq</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">cur_target_seq</span><span class="p">]</span>

        <span class="k">for</span> <span class="n">params</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">targets</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">params</span><span class="o">.</span><span class="n">order</span> <span class="o">!=</span> <span class="n">order</span><span class="p">:</span>
                <span class="k">continue</span>

            <span class="n">e</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">entityManager</span><span class="o">.</span><span class="n">add_entity</span><span class="p">(</span><span class="s2">&quot;target&quot;</span><span class="p">)</span>

            <span class="n">e</span><span class="o">.</span><span class="n">add_component</span><span class="p">(</span><span class="n">gcomp</span><span class="o">.</span><span class="n">CTransform</span><span class="p">)</span>
            <span class="n">c_transform</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">get_component</span><span class="p">(</span><span class="n">gcomp</span><span class="o">.</span><span class="n">CTransform</span><span class="p">)</span>
            <span class="n">c_transform</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">gphysics</span><span class="o">.</span><span class="n">dist_to_pixels</span><span class="p">(</span>
                <span class="n">params</span><span class="o">.</span><span class="n">loc_x</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">dist_per_pix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                <span class="n">min_pos</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">physics</span><span class="o">.</span><span class="n">min_pos</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
            <span class="p">)</span>
            <span class="n">c_transform</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">gphysics</span><span class="o">.</span><span class="n">dist_to_pixels</span><span class="p">(</span>
                <span class="n">params</span><span class="o">.</span><span class="n">loc_y</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">dist_per_pix</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
                <span class="n">min_pos</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">physics</span><span class="o">.</span><span class="n">min_pos</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
            <span class="p">)</span>
            <span class="n">c_transform</span><span class="o">.</span><span class="n">last_pos</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">c_transform</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">c_transform</span><span class="o">.</span><span class="n">last_pos</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">c_transform</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

            <span class="n">e</span><span class="o">.</span><span class="n">add_component</span><span class="p">(</span>
                <span class="n">gcomp</span><span class="o">.</span><span class="n">CShape</span><span class="p">,</span>
                <span class="n">s_type</span><span class="o">=</span><span class="n">params</span><span class="o">.</span><span class="n">shape</span><span class="o">.</span><span class="n">type</span><span class="p">,</span>
                <span class="n">w</span><span class="o">=</span><span class="n">gphysics</span><span class="o">.</span><span class="n">dist_to_pixels</span><span class="p">(</span><span class="n">params</span><span class="o">.</span><span class="n">shape</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dist_per_pix</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
                <span class="n">h</span><span class="o">=</span><span class="n">gphysics</span><span class="o">.</span><span class="n">dist_to_pixels</span><span class="p">(</span><span class="n">params</span><span class="o">.</span><span class="n">shape</span><span class="o">.</span><span class="n">height</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dist_per_pix</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span>
                <span class="n">color</span><span class="o">=</span><span class="n">params</span><span class="o">.</span><span class="n">shape</span><span class="o">.</span><span class="n">color</span><span class="p">,</span>
                <span class="n">zorder</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                <span class="n">fpath</span><span class="o">=</span><span class="n">params</span><span class="o">.</span><span class="n">shape</span><span class="o">.</span><span class="n">file</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="k">if</span> <span class="n">params</span><span class="o">.</span><span class="n">collision</span><span class="o">.</span><span class="n">height</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">params</span><span class="o">.</span><span class="n">collision</span><span class="o">.</span><span class="n">width</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">e</span><span class="o">.</span><span class="n">add_component</span><span class="p">(</span>
                    <span class="n">gcomp</span><span class="o">.</span><span class="n">CCollision</span><span class="p">,</span>
                    <span class="n">w</span><span class="o">=</span><span class="n">gphysics</span><span class="o">.</span><span class="n">dist_to_pixels</span><span class="p">(</span>
                        <span class="n">params</span><span class="o">.</span><span class="n">collision</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dist_per_pix</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="p">),</span>
                    <span class="n">h</span><span class="o">=</span><span class="n">gphysics</span><span class="o">.</span><span class="n">dist_to_pixels</span><span class="p">(</span>
                        <span class="n">params</span><span class="o">.</span><span class="n">collision</span><span class="o">.</span><span class="n">height</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dist_per_pix</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                    <span class="p">),</span>
                <span class="p">)</span>

            <span class="n">e</span><span class="o">.</span><span class="n">add_component</span><span class="p">(</span><span class="n">gcomp</span><span class="o">.</span><span class="n">CCapabilities</span><span class="p">,</span> <span class="n">capabilities</span><span class="o">=</span><span class="n">params</span><span class="o">.</span><span class="n">capabilities</span><span class="p">)</span>

            <span class="n">e</span><span class="o">.</span><span class="n">add_component</span><span class="p">(</span><span class="n">gcomp</span><span class="o">.</span><span class="n">CPriority</span><span class="p">,</span> <span class="n">priority</span><span class="o">=</span><span class="n">params</span><span class="o">.</span><span class="n">priority</span><span class="p">)</span>

        <span class="k">return</span> <span class="kc">True</span></div>


<div class="viewcode-block" id="SimpleUAV2d.get_player_pos_vel_inds">
<a class="viewcode-back" href="../../../_autosummary/gncpy/games/SimpleUAV2d/gncpy.games.SimpleUAV2d.SimpleUAV2d.html#gncpy.games.SimpleUAV2d.SimpleUAV2d.get_player_pos_vel_inds">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_player_pos_vel_inds</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Determines the position and velocity indices in the state vector.</span>

<span class="sd">        Note, this assumes all players have the same state bounds when params is</span>
<span class="sd">        not specified.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        params : :class:`.DynamicsParams`, optional</span>
<span class="sd">            Player parameter structure. The default is None which uses the first</span>
<span class="sd">            player in the player&#39;s list.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        pos_inds : list</span>
<span class="sd">            indices for the position components (x, y).</span>
<span class="sd">        vel_inds : list</span>
<span class="sd">            indices for the velocity components (x, y).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">params</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">params</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">players</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">dynamics</span>
        <span class="k">if</span> <span class="n">params</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;DoubleIntegrator&quot;</span><span class="p">:</span>
            <span class="n">pos_inds</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
            <span class="n">vel_inds</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">params</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;CoordinatedTurn&quot;</span><span class="p">:</span>
            <span class="n">pos_inds</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
            <span class="n">vel_inds</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>

        <span class="k">return</span> <span class="n">pos_inds</span><span class="p">,</span> <span class="n">vel_inds</span></div>


<div class="viewcode-block" id="SimpleUAV2d.get_player_state_bounds">
<a class="viewcode-back" href="../../../_autosummary/gncpy/games/SimpleUAV2d/gncpy.games.SimpleUAV2d.SimpleUAV2d.html#gncpy.games.SimpleUAV2d.SimpleUAV2d.get_player_state_bounds">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_player_state_bounds</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Calculate the bounds on the player state.</span>

<span class="sd">        Note, this assumes all players have the same state bounds when params is</span>
<span class="sd">        not specified.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        params : :class:`.DynamicsParams`, optional</span>
<span class="sd">            Player parameter structure. The default is None which uses the first</span>
<span class="sd">            player in the player&#39;s list.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        2 x N numpy array</span>
<span class="sd">            minimum and maximum values of the player state.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">params</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">params</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">players</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">dynamics</span>

        <span class="n">pos_inds</span><span class="p">,</span> <span class="n">vel_inds</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_player_pos_vel_inds</span><span class="p">(</span><span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">params</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;DoubleIntegrator&quot;</span><span class="p">:</span>
            <span class="n">state_low</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">(</span>
                <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">physics</span><span class="o">.</span><span class="n">min_pos</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">,</span> <span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">]))</span>
            <span class="p">)</span>
            <span class="n">state_high</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">(</span>
                <span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">physics</span><span class="o">.</span><span class="n">min_pos</span>
                    <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
                        <span class="p">[</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">physics</span><span class="o">.</span><span class="n">dist_width</span><span class="p">,</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">physics</span><span class="o">.</span><span class="n">dist_height</span><span class="p">,</span>
                        <span class="p">]</span>
                    <span class="p">),</span>
                    <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">]),</span>
                <span class="p">)</span>
            <span class="p">)</span>
            <span class="n">sParams</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">stateConstraint</span>
            <span class="k">if</span> <span class="n">sParams</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">!=</span> <span class="s2">&quot;none&quot;</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">sParams</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;velocity&quot;</span><span class="p">:</span>
                    <span class="n">state_low</span><span class="p">[</span><span class="n">vel_inds</span><span class="p">]</span> <span class="o">=</span> <span class="n">sParams</span><span class="o">.</span><span class="n">min_vels</span>
                    <span class="n">state_high</span><span class="p">[</span><span class="n">vel_inds</span><span class="p">]</span> <span class="o">=</span> <span class="n">sParams</span><span class="o">.</span><span class="n">max_vels</span>

        <span class="k">elif</span> <span class="n">params</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;CoordinatedTurn&quot;</span><span class="p">:</span>
            <span class="n">state_low</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">(</span>
                <span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">physics</span><span class="o">.</span><span class="n">min_pos</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                    <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">]),</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">physics</span><span class="o">.</span><span class="n">min_pos</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
                    <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">]),</span>
                <span class="p">)</span>
            <span class="p">)</span>
            <span class="n">state_high</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">(</span>
                <span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">physics</span><span class="o">.</span><span class="n">min_pos</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">physics</span><span class="o">.</span><span class="n">dist_width</span><span class="p">,</span>
                    <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">]),</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">physics</span><span class="o">.</span><span class="n">min_pos</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">physics</span><span class="o">.</span><span class="n">dist_height</span><span class="p">,</span>
                    <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">,</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">]),</span>
                <span class="p">)</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">sParams</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">!=</span> <span class="s2">&quot;none&quot;</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">sParams</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;velocity&quot;</span><span class="p">:</span>
                    <span class="n">state_low</span><span class="p">[</span><span class="n">vel_inds</span><span class="p">]</span> <span class="o">=</span> <span class="n">sParams</span><span class="o">.</span><span class="n">min_vel</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">vel_inds</span><span class="p">))</span>
                    <span class="n">state_high</span><span class="p">[</span><span class="n">vel_inds</span><span class="p">]</span> <span class="o">=</span> <span class="n">sParams</span><span class="o">.</span><span class="n">min_vel</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">vel_inds</span><span class="p">))</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Invalid dynamics type: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">sParams</span><span class="o">.</span><span class="n">type</span><span class="p">))</span>

        <span class="k">return</span> <span class="n">state_low</span><span class="p">,</span> <span class="n">state_high</span></div>


<div class="viewcode-block" id="SimpleUAV2d.get_players_state">
<a class="viewcode-back" href="../../../_autosummary/gncpy/games/SimpleUAV2d/gncpy.games.SimpleUAV2d.SimpleUAV2d.html#gncpy.games.SimpleUAV2d.SimpleUAV2d.get_players_state">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_players_state</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns current dynamic state of all players.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        states : dict</span>
<span class="sd">            Each key is the entity id and each value is a numpy array.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">states</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">entityManager</span><span class="o">.</span><span class="n">get_entities</span><span class="p">(</span><span class="s2">&quot;player&quot;</span><span class="p">):</span>
            <span class="n">pTrans</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">get_component</span><span class="p">(</span><span class="n">gcomp</span><span class="o">.</span><span class="n">CDynamics</span><span class="p">)</span>
            <span class="n">states</span><span class="p">[</span><span class="n">p</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">pTrans</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">states</span></div>


<div class="viewcode-block" id="SimpleUAV2d.create_dynamics">
<a class="viewcode-back" href="../../../_autosummary/gncpy/games/SimpleUAV2d/gncpy.games.SimpleUAV2d.SimpleUAV2d.html#gncpy.games.SimpleUAV2d.SimpleUAV2d.create_dynamics">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">create_dynamics</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">params</span><span class="p">,</span> <span class="n">cBirth</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create the dynamics system for a player.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        params : :class:`.DynamicsParams`</span>
<span class="sd">            Parameters to use when making the dynamics.</span>
<span class="sd">        cBirth : :class:`gncpy.game_engine.components.CBirth`</span>
<span class="sd">            Birth component associated with this player.</span>

<span class="sd">        Raises</span>
<span class="sd">        ------</span>
<span class="sd">        RuntimeError</span>
<span class="sd">            Incorrect parameters are set.</span>
<span class="sd">        NotImplementedError</span>
<span class="sd">            Wrong dynamics, control model and/or state constraint combo specified.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        dynObj : :class:`gncpy.dynamics.basic.DynamicsBase`</span>
<span class="sd">            Dynamic object created</span>
<span class="sd">        pos_inds : list</span>
<span class="sd">            indices of the position variables in the state</span>
<span class="sd">        vel_inds : list</span>
<span class="sd">            indices of the velocity variables in the state</span>
<span class="sd">        state_args : tuple</span>
<span class="sd">            additional arguments for the dynObj propagate function</span>
<span class="sd">        ctrl_args</span>
<span class="sd">            additional arguments for the dynObj propagate function</span>
<span class="sd">        state_low : numpy array</span>
<span class="sd">            lower state bounds</span>
<span class="sd">        state_high : numpy array</span>
<span class="sd">            upper state bounds</span>
<span class="sd">        state0 : numpy array</span>
<span class="sd">            initial state of the dynObj</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">cls_type</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">gdyn</span><span class="p">,</span> <span class="n">params</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>

        <span class="n">pos_inds</span><span class="p">,</span> <span class="n">vel_inds</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_player_pos_vel_inds</span><span class="p">(</span><span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="n">params</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;DoubleIntegrator&quot;</span><span class="p">:</span>
            <span class="n">state_args</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">physics</span><span class="o">.</span><span class="n">update_dt</span><span class="p">,)</span>

            <span class="n">cParams</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">controlModel</span>
            <span class="k">if</span> <span class="n">cParams</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;velocity&quot;</span><span class="p">:</span>
                <span class="n">ctrl_args</span> <span class="o">=</span> <span class="p">()</span>

                <span class="k">def</span><span class="w"> </span><span class="nf">_ctrl_mod</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">cParams</span><span class="o">.</span><span class="n">max_vel_x</span> <span class="ow">and</span> <span class="n">cParams</span><span class="o">.</span><span class="n">max_vel_y</span><span class="p">:</span>
                        <span class="n">mat</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">diag</span><span class="p">(</span>
                            <span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">cParams</span><span class="o">.</span><span class="n">max_vel_x</span><span class="p">),</span> <span class="nb">float</span><span class="p">(</span><span class="n">cParams</span><span class="o">.</span><span class="n">max_vel_y</span><span class="p">))</span>
                        <span class="p">)</span>
                    <span class="k">elif</span> <span class="n">cParams</span><span class="o">.</span><span class="n">max_vel</span><span class="p">:</span>
                        <span class="n">mat</span> <span class="o">=</span> <span class="n">cParams</span><span class="o">.</span><span class="n">max_vel</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">eye</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
                            <span class="s2">&quot;Must set max_vel or max_vel_x and max_vel_y in control model.&quot;</span>
                        <span class="p">)</span>
                    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">((</span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)),</span> <span class="n">mat</span><span class="p">))</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Control model type </span><span class="si">{}</span><span class="s2"> not implemented for dynamics </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="n">cParams</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">params</span><span class="o">.</span><span class="n">type</span>
                <span class="p">)</span>
                <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;control_model&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_ctrl_mod</span>

            <span class="n">sParams</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">stateConstraint</span>
            <span class="k">if</span> <span class="n">sParams</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">!=</span> <span class="s2">&quot;none&quot;</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">sParams</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;velocity&quot;</span><span class="p">:</span>

                    <span class="k">def</span><span class="w"> </span><span class="nf">_state_constraint</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
                        <span class="n">x</span><span class="p">[</span><span class="n">vel_inds</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">(</span>
                            <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">((</span><span class="n">x</span><span class="p">[</span><span class="n">vel_inds</span><span class="p">]</span><span class="o">.</span><span class="n">ravel</span><span class="p">(),</span> <span class="n">sParams</span><span class="o">.</span><span class="n">max_vels</span><span class="p">)),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                        <span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="nb">len</span><span class="p">(</span><span class="n">vel_inds</span><span class="p">),</span> <span class="mi">1</span><span class="p">))</span>
                        <span class="n">x</span><span class="p">[</span><span class="n">vel_inds</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span>
                            <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">((</span><span class="n">x</span><span class="p">[</span><span class="n">vel_inds</span><span class="p">]</span><span class="o">.</span><span class="n">ravel</span><span class="p">(),</span> <span class="n">sParams</span><span class="o">.</span><span class="n">min_vels</span><span class="p">)),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                        <span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="nb">len</span><span class="p">(</span><span class="n">vel_inds</span><span class="p">),</span> <span class="mi">1</span><span class="p">))</span>
                        <span class="k">return</span> <span class="n">x</span>

                <span class="k">else</span><span class="p">:</span>
                    <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;State constraint type </span><span class="si">{}</span><span class="s2"> not implemented for dynamics </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                        <span class="n">sParams</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">params</span><span class="o">.</span><span class="n">type</span>
                    <span class="p">)</span>
                    <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;state_constraint&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_state_constraint</span>

        <span class="k">elif</span> <span class="n">params</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;CoordinatedTurn&quot;</span><span class="p">:</span>
            <span class="n">state_args</span> <span class="o">=</span> <span class="p">()</span>

            <span class="n">cParams</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">controlModel</span>
            <span class="k">if</span> <span class="n">cParams</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;velocity_turn&quot;</span><span class="p">:</span>
                <span class="n">ctrl_args</span> <span class="o">=</span> <span class="p">()</span>

                <span class="k">def</span><span class="w"> </span><span class="nf">_g1</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">u</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
                    <span class="k">return</span> <span class="n">cParams</span><span class="o">.</span><span class="n">max_vel</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="o">.</span><span class="n">item</span><span class="p">())</span> <span class="o">*</span> <span class="n">u</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">item</span><span class="p">()</span>

                <span class="k">def</span><span class="w"> </span><span class="nf">_g0</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">u</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
                    <span class="k">return</span> <span class="mi">0</span>

                <span class="k">def</span><span class="w"> </span><span class="nf">_g3</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">u</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
                    <span class="k">return</span> <span class="n">cParams</span><span class="o">.</span><span class="n">max_vel</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="o">.</span><span class="n">item</span><span class="p">())</span> <span class="o">*</span> <span class="n">u</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">item</span><span class="p">()</span>

                <span class="k">def</span><span class="w"> </span><span class="nf">_g2</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">u</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
                    <span class="k">return</span> <span class="mi">0</span>

                <span class="k">def</span><span class="w"> </span><span class="nf">_g4</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">u</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
                    <span class="k">return</span> <span class="n">cParams</span><span class="o">.</span><span class="n">max_turn_rate</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mi">180</span> <span class="o">*</span> <span class="n">u</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">item</span><span class="p">()</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Control model type </span><span class="si">{}</span><span class="s2"> not implemented for dynamics </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="n">cParams</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">params</span><span class="o">.</span><span class="n">type</span>
                <span class="p">)</span>
                <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;control_model&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">_g0</span><span class="p">,</span> <span class="n">_g1</span><span class="p">,</span> <span class="n">_g2</span><span class="p">,</span> <span class="n">_g3</span><span class="p">,</span> <span class="n">_g4</span><span class="p">]</span>

            <span class="n">sParams</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">stateConstraint</span>
            <span class="k">if</span> <span class="n">sParams</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">!=</span> <span class="s2">&quot;none&quot;</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">sParams</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;velocity&quot;</span><span class="p">:</span>

                    <span class="k">def</span><span class="w"> </span><span class="nf">_state_constraint</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
                        <span class="n">x</span><span class="p">[</span><span class="n">vel_inds</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">(</span>
                            <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">((</span><span class="n">x</span><span class="p">[</span><span class="n">vel_inds</span><span class="p">]</span><span class="o">.</span><span class="n">ravel</span><span class="p">(),</span> <span class="n">sParams</span><span class="o">.</span><span class="n">max_vels</span><span class="p">)),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                        <span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
                        <span class="n">x</span><span class="p">[</span><span class="n">vel_inds</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span>
                            <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">((</span><span class="n">x</span><span class="p">[</span><span class="n">vel_inds</span><span class="p">]</span><span class="o">.</span><span class="n">ravel</span><span class="p">(),</span> <span class="n">sParams</span><span class="o">.</span><span class="n">min_vels</span><span class="p">)),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                        <span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
                        <span class="k">if</span> <span class="n">x</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
                            <span class="n">x</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mod</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span> <span class="o">-</span><span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">x</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mod</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span>

                        <span class="k">return</span> <span class="n">x</span>

                <span class="k">else</span><span class="p">:</span>
                    <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;State constraint type </span><span class="si">{}</span><span class="s2"> not implemented for dynamics </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                        <span class="n">sParams</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">params</span><span class="o">.</span><span class="n">type</span>
                    <span class="p">)</span>
                    <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;state_constraint&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_state_constraint</span>

        <span class="n">kwargs</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">params</span><span class="o">.</span><span class="n">extra_params</span><span class="p">)</span>

        <span class="n">state_low</span><span class="p">,</span> <span class="n">state_high</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_player_state_bounds</span><span class="p">(</span><span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>

        <span class="n">dynObj</span> <span class="o">=</span> <span class="n">cls_type</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">state0</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">state_low</span><span class="o">.</span><span class="n">size</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
        <span class="n">val</span> <span class="o">=</span> <span class="n">cBirth</span><span class="o">.</span><span class="n">sample</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">val</span><span class="o">.</span><span class="n">size</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">pos_inds</span><span class="p">):</span>
            <span class="n">state0</span><span class="p">[</span><span class="n">pos_inds</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">state0</span><span class="p">[</span><span class="n">pos_inds</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">cBirth</span><span class="o">.</span><span class="n">randomize</span> <span class="ow">and</span> <span class="n">params</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;CoordinatedTurn&quot;</span><span class="p">:</span>
                <span class="n">state0</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rng</span><span class="o">.</span><span class="n">random</span><span class="p">()</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span>

        <span class="k">elif</span> <span class="n">val</span><span class="o">.</span><span class="n">size</span> <span class="o">==</span> <span class="n">state0</span><span class="o">.</span><span class="n">size</span><span class="p">:</span>
            <span class="n">state0</span> <span class="o">=</span> <span class="n">val</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">state0</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Birth location must match position size or full state.&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="p">(</span>
            <span class="n">dynObj</span><span class="p">,</span>
            <span class="n">pos_inds</span><span class="p">,</span>
            <span class="n">vel_inds</span><span class="p">,</span>
            <span class="n">state_args</span><span class="p">,</span>
            <span class="n">ctrl_args</span><span class="p">,</span>
            <span class="n">state_low</span><span class="p">,</span>
            <span class="n">state_high</span><span class="p">,</span>
            <span class="n">state0</span><span class="p">,</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="SimpleUAV2d.create_player">
<a class="viewcode-back" href="../../../_autosummary/gncpy/games/SimpleUAV2d/gncpy.games.SimpleUAV2d.SimpleUAV2d.html#gncpy.games.SimpleUAV2d.SimpleUAV2d.create_player">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">create_player</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">params</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates a player entity.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        params : :class:`gncpy.games.SimpleUAV2d.PlayerParams`</span>
<span class="sd">            Parameters for the player being created.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        p : :class:`gncpy.game_engine.entities.Entity`</span>
<span class="sd">            Reference to the player entity that was created.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># check if using random birth time</span>
        <span class="k">if</span> <span class="n">params</span><span class="o">.</span><span class="n">birth</span><span class="o">.</span><span class="n">times</span><span class="o">.</span><span class="n">size</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">req_spawn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rng</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">params</span><span class="o">.</span><span class="n">birth</span><span class="o">.</span><span class="n">prob</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">diff</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_time</span> <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">params</span><span class="o">.</span><span class="n">birth</span><span class="o">.</span><span class="n">times</span><span class="p">)</span>
            <span class="n">inds</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">diff</span> <span class="o">&gt;=</span> <span class="o">-</span><span class="mf">1e-8</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">inds</span><span class="o">.</span><span class="n">size</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">None</span>
            <span class="n">min_diff</span> <span class="o">=</span> <span class="n">diff</span><span class="p">[</span><span class="n">inds</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]]</span>
            <span class="c1"># birth times don&#39;t have to align with updates</span>
            <span class="n">req_spawn</span> <span class="o">=</span> <span class="n">min_diff</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">physics</span><span class="o">.</span><span class="n">update_dt</span> <span class="o">-</span> <span class="mf">1e-8</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">req_spawn</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="n">e</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">entityManager</span><span class="o">.</span><span class="n">add_entity</span><span class="p">(</span><span class="s2">&quot;player&quot;</span><span class="p">)</span>

        <span class="n">e</span><span class="o">.</span><span class="n">add_component</span><span class="p">(</span>
            <span class="n">gcomp</span><span class="o">.</span><span class="n">CBirth</span><span class="p">,</span>
            <span class="n">b_type</span><span class="o">=</span><span class="n">params</span><span class="o">.</span><span class="n">birth</span><span class="o">.</span><span class="n">type</span><span class="p">,</span>
            <span class="n">loc</span><span class="o">=</span><span class="n">params</span><span class="o">.</span><span class="n">birth</span><span class="o">.</span><span class="n">location</span><span class="p">,</span>
            <span class="n">scale</span><span class="o">=</span><span class="n">params</span><span class="o">.</span><span class="n">birth</span><span class="o">.</span><span class="n">scale</span><span class="p">,</span>
            <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="o">.</span><span class="n">birth</span><span class="o">.</span><span class="n">extra_params</span><span class="p">,</span>
            <span class="n">rng</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">rng</span><span class="p">,</span>
            <span class="n">randomize</span><span class="o">=</span><span class="n">params</span><span class="o">.</span><span class="n">birth</span><span class="o">.</span><span class="n">randomize</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">e</span><span class="o">.</span><span class="n">add_component</span><span class="p">(</span><span class="n">gcomp</span><span class="o">.</span><span class="n">CDynamics</span><span class="p">)</span>
        <span class="n">cDyn</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">get_component</span><span class="p">(</span><span class="n">gcomp</span><span class="o">.</span><span class="n">CDynamics</span><span class="p">)</span>
        <span class="p">(</span>
            <span class="n">cDyn</span><span class="o">.</span><span class="n">dynObj</span><span class="p">,</span>
            <span class="n">cDyn</span><span class="o">.</span><span class="n">pos_inds</span><span class="p">,</span>
            <span class="n">cDyn</span><span class="o">.</span><span class="n">vel_inds</span><span class="p">,</span>
            <span class="n">cDyn</span><span class="o">.</span><span class="n">state_args</span><span class="p">,</span>
            <span class="n">cDyn</span><span class="o">.</span><span class="n">ctrl_args</span><span class="p">,</span>
            <span class="n">cDyn</span><span class="o">.</span><span class="n">state_low</span><span class="p">,</span>
            <span class="n">cDyn</span><span class="o">.</span><span class="n">state_high</span><span class="p">,</span>
            <span class="n">cDyn</span><span class="o">.</span><span class="n">state</span><span class="p">,</span>
        <span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_dynamics</span><span class="p">(</span><span class="n">params</span><span class="o">.</span><span class="n">dynamics</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">get_component</span><span class="p">(</span><span class="n">gcomp</span><span class="o">.</span><span class="n">CBirth</span><span class="p">))</span>

        <span class="n">e</span><span class="o">.</span><span class="n">add_component</span><span class="p">(</span><span class="n">gcomp</span><span class="o">.</span><span class="n">CTransform</span><span class="p">)</span>
        <span class="n">cTrans</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">get_component</span><span class="p">(</span><span class="n">gcomp</span><span class="o">.</span><span class="n">CTransform</span><span class="p">)</span>
        <span class="n">p_ii</span> <span class="o">=</span> <span class="n">cDyn</span><span class="o">.</span><span class="n">pos_inds</span>
        <span class="n">v_ii</span> <span class="o">=</span> <span class="n">cDyn</span><span class="o">.</span><span class="n">vel_inds</span>
        <span class="n">cTrans</span><span class="o">.</span><span class="n">pos</span> <span class="o">=</span> <span class="n">gphysics</span><span class="o">.</span><span class="n">dist_to_pixels</span><span class="p">(</span>
            <span class="n">cDyn</span><span class="o">.</span><span class="n">state</span><span class="p">[</span><span class="n">p_ii</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">dist_per_pix</span><span class="p">,</span> <span class="n">min_pos</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">physics</span><span class="o">.</span><span class="n">min_pos</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">v_ii</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">cTrans</span><span class="o">.</span><span class="n">vel</span> <span class="o">=</span> <span class="n">gphysics</span><span class="o">.</span><span class="n">dist_to_pixels</span><span class="p">(</span><span class="n">cDyn</span><span class="o">.</span><span class="n">state</span><span class="p">[</span><span class="n">v_ii</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">dist_per_pix</span><span class="p">)</span>

        <span class="n">e</span><span class="o">.</span><span class="n">add_component</span><span class="p">(</span><span class="n">gcomp</span><span class="o">.</span><span class="n">CEvents</span><span class="p">)</span>

        <span class="n">e</span><span class="o">.</span><span class="n">add_component</span><span class="p">(</span>
            <span class="n">gcomp</span><span class="o">.</span><span class="n">CShape</span><span class="p">,</span>
            <span class="n">s_type</span><span class="o">=</span><span class="n">params</span><span class="o">.</span><span class="n">shape</span><span class="o">.</span><span class="n">type</span><span class="p">,</span>
            <span class="n">w</span><span class="o">=</span><span class="n">gphysics</span><span class="o">.</span><span class="n">dist_to_pixels</span><span class="p">(</span><span class="n">params</span><span class="o">.</span><span class="n">shape</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dist_per_pix</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
            <span class="n">h</span><span class="o">=</span><span class="n">gphysics</span><span class="o">.</span><span class="n">dist_to_pixels</span><span class="p">(</span><span class="n">params</span><span class="o">.</span><span class="n">shape</span><span class="o">.</span><span class="n">height</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dist_per_pix</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span>
            <span class="n">color</span><span class="o">=</span><span class="nb">tuple</span><span class="p">(</span><span class="n">params</span><span class="o">.</span><span class="n">shape</span><span class="o">.</span><span class="n">color</span><span class="p">),</span>
            <span class="n">zorder</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
            <span class="n">fpath</span><span class="o">=</span><span class="n">params</span><span class="o">.</span><span class="n">shape</span><span class="o">.</span><span class="n">file</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">e</span><span class="o">.</span><span class="n">add_component</span><span class="p">(</span>
            <span class="n">gcomp</span><span class="o">.</span><span class="n">CCollision</span><span class="p">,</span>
            <span class="n">w</span><span class="o">=</span><span class="n">gphysics</span><span class="o">.</span><span class="n">dist_to_pixels</span><span class="p">(</span><span class="n">params</span><span class="o">.</span><span class="n">collision</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dist_per_pix</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
            <span class="n">h</span><span class="o">=</span><span class="n">gphysics</span><span class="o">.</span><span class="n">dist_to_pixels</span><span class="p">(</span><span class="n">params</span><span class="o">.</span><span class="n">collision</span><span class="o">.</span><span class="n">height</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dist_per_pix</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span>
        <span class="p">)</span>

        <span class="n">e</span><span class="o">.</span><span class="n">add_component</span><span class="p">(</span><span class="n">gcomp</span><span class="o">.</span><span class="n">CCapabilities</span><span class="p">,</span> <span class="n">capabilities</span><span class="o">=</span><span class="n">params</span><span class="o">.</span><span class="n">capabilities</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">e</span></div>


<div class="viewcode-block" id="SimpleUAV2d.spawn_players">
<a class="viewcode-back" href="../../../_autosummary/gncpy/games/SimpleUAV2d/gncpy.games.SimpleUAV2d.SimpleUAV2d.html#gncpy.games.SimpleUAV2d.SimpleUAV2d.spawn_players">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">spawn_players</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Spawns a new player if needed.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">params</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">players</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">create_player</span><span class="p">(</span><span class="n">params</span><span class="p">)</span></div>


<div class="viewcode-block" id="SimpleUAV2d.propagate_dynamics">
<a class="viewcode-back" href="../../../_autosummary/gncpy/games/SimpleUAV2d/gncpy.games.SimpleUAV2d.SimpleUAV2d.html#gncpy.games.SimpleUAV2d.SimpleUAV2d.propagate_dynamics">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">propagate_dynamics</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">eDyn</span><span class="p">,</span> <span class="n">action</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Propagates the dynamics with the given action.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        eDyn : :class:`gncpy.game_engine.components.CDynamics`</span>
<span class="sd">            dynamics component to propagate.</span>
<span class="sd">        action : numpy array</span>
<span class="sd">            Control input for the dynamics object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">eDyn</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="n">eDyn</span><span class="o">.</span><span class="n">dynObj</span><span class="o">.</span><span class="n">propagate_state</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">current_time</span><span class="p">,</span>
            <span class="n">eDyn</span><span class="o">.</span><span class="n">last_state</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)),</span>
            <span class="n">u</span><span class="o">=</span><span class="n">action</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)),</span>
            <span class="n">state_args</span><span class="o">=</span><span class="n">eDyn</span><span class="o">.</span><span class="n">state_args</span><span class="p">,</span>
            <span class="n">ctrl_args</span><span class="o">=</span><span class="n">eDyn</span><span class="o">.</span><span class="n">ctrl_args</span><span class="p">,</span>
        <span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span></div>


<div class="viewcode-block" id="SimpleUAV2d.get_player_ids">
<a class="viewcode-back" href="../../../_autosummary/gncpy/games/SimpleUAV2d/gncpy.games.SimpleUAV2d.SimpleUAV2d.html#gncpy.games.SimpleUAV2d.SimpleUAV2d.get_player_ids">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_player_ids</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the entity ids of all players.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        list</span>
<span class="sd">            all entity ids of the players.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">entityManager</span><span class="o">.</span><span class="n">get_entity_ids</span><span class="p">(</span><span class="n">tag</span><span class="o">=</span><span class="s2">&quot;player&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="SimpleUAV2d.reset">
<a class="viewcode-back" href="../../../_autosummary/gncpy/games/SimpleUAV2d/gncpy.games.SimpleUAV2d.SimpleUAV2d.html#gncpy.games.SimpleUAV2d.SimpleUAV2d.reset">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Resets the game to the base state.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        kwargs : dict</span>
<span class="sd">            Additional arguments for the parent classes.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">reset</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="c1"># find list of all possible order values, and all capabilities</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cur_target_seq</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">target_seq</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">all_capabilities</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">targets</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">t</span><span class="o">.</span><span class="n">order</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">target_seq</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">target_seq</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">order</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">t</span><span class="o">.</span><span class="n">capabilities</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">c</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all_capabilities</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">all_capabilities</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">target_seq</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>

        <span class="c1"># make sure all players either have birth times or birth probability and update all capabilities</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">has_random_player_birth_times</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">max_player_birth_time</span> <span class="o">=</span> <span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">inf</span>
        <span class="k">for</span> <span class="n">ii</span><span class="p">,</span> <span class="n">p</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">players</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">p</span><span class="o">.</span><span class="n">birth</span><span class="o">.</span><span class="n">times</span><span class="o">.</span><span class="n">size</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">p</span><span class="o">.</span><span class="n">birth</span><span class="o">.</span><span class="n">prob</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Player </span><span class="si">{}</span><span class="s2"> has invalid birth settings.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ii</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">has_random_player_birth_times</span> <span class="o">=</span> <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">has_random_player_birth_times</span> <span class="ow">or</span> <span class="n">p</span><span class="o">.</span><span class="n">birth</span><span class="o">.</span><span class="n">prob</span> <span class="o">&gt;</span> <span class="mi">0</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">birth</span><span class="o">.</span><span class="n">times</span><span class="p">)</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_player_birth_time</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">max_player_birth_time</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">birth</span><span class="o">.</span><span class="n">times</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">p</span><span class="o">.</span><span class="n">capabilities</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">c</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all_capabilities</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">all_capabilities</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">create_obstacles</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create_hazards</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create_targets</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">spawn_players</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_performed_reset_spawn</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">entityManager</span><span class="o">.</span><span class="n">update</span><span class="p">()</span></div>


<div class="viewcode-block" id="SimpleUAV2d.s_collision">
<a class="viewcode-back" href="../../../_autosummary/gncpy/games/SimpleUAV2d/gncpy.games.SimpleUAV2d.SimpleUAV2d.html#gncpy.games.SimpleUAV2d.SimpleUAV2d.s_collision">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">s_collision</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check for collisions between entities.</span>

<span class="sd">        This also handles player death if a hazard destroys a player, and</span>
<span class="sd">        updates the events.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        bool</span>
<span class="sd">            Flag indicating if a target was hit.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">hit_target</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="c1"># update all bounding boxes</span>
        <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">entityManager</span><span class="o">.</span><span class="n">get_entities</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">e</span><span class="o">.</span><span class="n">has_component</span><span class="p">(</span><span class="n">gcomp</span><span class="o">.</span><span class="n">CTransform</span><span class="p">)</span> <span class="ow">and</span> <span class="n">e</span><span class="o">.</span><span class="n">has_component</span><span class="p">(</span><span class="n">gcomp</span><span class="o">.</span><span class="n">CCollision</span><span class="p">):</span>
                <span class="n">c_collision</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">get_component</span><span class="p">(</span><span class="n">gcomp</span><span class="o">.</span><span class="n">CCollision</span><span class="p">)</span>
                <span class="n">c_transform</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">get_component</span><span class="p">(</span><span class="n">gcomp</span><span class="o">.</span><span class="n">CTransform</span><span class="p">)</span>
                <span class="n">c_collision</span><span class="o">.</span><span class="n">aabb</span><span class="o">.</span><span class="n">centerx</span> <span class="o">=</span> <span class="n">c_transform</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">item</span><span class="p">()</span>
                <span class="n">c_collision</span><span class="o">.</span><span class="n">aabb</span><span class="o">.</span><span class="n">centery</span> <span class="o">=</span> <span class="n">c_transform</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">item</span><span class="p">()</span>

        <span class="c1"># check for collision of player</span>
        <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">entityManager</span><span class="o">.</span><span class="n">get_entities</span><span class="p">(</span><span class="s2">&quot;player&quot;</span><span class="p">):</span>
            <span class="n">p_aabb</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">get_component</span><span class="p">(</span><span class="n">gcomp</span><span class="o">.</span><span class="n">CCollision</span><span class="p">)</span><span class="o">.</span><span class="n">aabb</span>
            <span class="n">p_trans</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">get_component</span><span class="p">(</span><span class="n">gcomp</span><span class="o">.</span><span class="n">CTransform</span><span class="p">)</span>
            <span class="n">p_events</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">get_component</span><span class="p">(</span><span class="n">gcomp</span><span class="o">.</span><span class="n">CEvents</span><span class="p">)</span>

            <span class="c1"># check for out of bounds, stop at out of bounds</span>
            <span class="n">out_side</span><span class="p">,</span> <span class="n">out_top</span> <span class="o">=</span> <span class="n">gphysics</span><span class="o">.</span><span class="n">clamp_window_bounds2d</span><span class="p">(</span>
                <span class="n">p_aabb</span><span class="p">,</span> <span class="n">p_trans</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">get_width</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">get_height</span><span class="p">()</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">out_side</span><span class="p">:</span>
                <span class="n">p_events</span><span class="o">.</span><span class="n">events</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">EventType</span><span class="o">.</span><span class="n">OBSTACLE</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">out_top</span><span class="p">:</span>
                <span class="n">p_events</span><span class="o">.</span><span class="n">events</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">EventType</span><span class="o">.</span><span class="n">OBSTACLE</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>

            <span class="c1"># check for collision with obstacle</span>
            <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">entityManager</span><span class="o">.</span><span class="n">get_entities</span><span class="p">(</span><span class="s2">&quot;obstacle&quot;</span><span class="p">):</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">w</span><span class="o">.</span><span class="n">has_component</span><span class="p">(</span><span class="n">gcomp</span><span class="o">.</span><span class="n">CCollision</span><span class="p">):</span>
                    <span class="k">continue</span>
                <span class="n">w_aabb</span> <span class="o">=</span> <span class="n">w</span><span class="o">.</span><span class="n">get_component</span><span class="p">(</span><span class="n">gcomp</span><span class="o">.</span><span class="n">CCollision</span><span class="p">)</span><span class="o">.</span><span class="n">aabb</span>
                <span class="k">if</span> <span class="n">gphysics</span><span class="o">.</span><span class="n">check_collision2d</span><span class="p">(</span><span class="n">p_aabb</span><span class="p">,</span> <span class="n">w_aabb</span><span class="p">):</span>
                    <span class="n">gphysics</span><span class="o">.</span><span class="n">resolve_collision2d</span><span class="p">(</span>
                        <span class="n">p_aabb</span><span class="p">,</span> <span class="n">w_aabb</span><span class="p">,</span> <span class="n">p_trans</span><span class="p">,</span> <span class="n">w</span><span class="o">.</span><span class="n">get_component</span><span class="p">(</span><span class="n">gcomp</span><span class="o">.</span><span class="n">CTransform</span><span class="p">)</span>
                    <span class="p">)</span>
                    <span class="n">p_events</span><span class="o">.</span><span class="n">events</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">EventType</span><span class="o">.</span><span class="n">OBSTACLE</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>

            <span class="c1"># check for collision with other players</span>
            <span class="k">for</span> <span class="n">otherP</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">entityManager</span><span class="o">.</span><span class="n">get_entities</span><span class="p">(</span><span class="s2">&quot;player&quot;</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">otherP</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">e</span><span class="o">.</span><span class="n">id</span><span class="p">:</span>
                    <span class="k">continue</span>
                <span class="n">fixedAAABB</span> <span class="o">=</span> <span class="n">otherP</span><span class="o">.</span><span class="n">get_component</span><span class="p">(</span><span class="n">gcomp</span><span class="o">.</span><span class="n">CCollision</span><span class="p">)</span><span class="o">.</span><span class="n">aabb</span>
                <span class="k">if</span> <span class="n">gphysics</span><span class="o">.</span><span class="n">check_collision2d</span><span class="p">(</span><span class="n">p_aabb</span><span class="p">,</span> <span class="n">fixedAAABB</span><span class="p">):</span>
                    <span class="n">gphysics</span><span class="o">.</span><span class="n">resolve_collision2d</span><span class="p">(</span>
                        <span class="n">p_aabb</span><span class="p">,</span>
                        <span class="n">fixedAAABB</span><span class="p">,</span>
                        <span class="n">p_trans</span><span class="p">,</span>
                        <span class="n">otherP</span><span class="o">.</span><span class="n">get_component</span><span class="p">(</span><span class="n">gcomp</span><span class="o">.</span><span class="n">CTransform</span><span class="p">),</span>
                    <span class="p">)</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">score</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;basic&quot;</span><span class="p">:</span>
                        <span class="n">p_events</span><span class="o">.</span><span class="n">events</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">EventType</span><span class="o">.</span><span class="n">OBSTACLE</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">p_events</span><span class="o">.</span><span class="n">events</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">EventType</span><span class="o">.</span><span class="n">COL_PLAYER</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>

            <span class="c1"># check for collision with hazard</span>
            <span class="k">for</span> <span class="n">h</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">entityManager</span><span class="o">.</span><span class="n">get_entities</span><span class="p">(</span><span class="s2">&quot;hazard&quot;</span><span class="p">):</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">h</span><span class="o">.</span><span class="n">has_component</span><span class="p">(</span><span class="n">gcomp</span><span class="o">.</span><span class="n">CCollision</span><span class="p">):</span>
                    <span class="k">continue</span>
                <span class="n">h_aabb</span> <span class="o">=</span> <span class="n">h</span><span class="o">.</span><span class="n">get_component</span><span class="p">(</span><span class="n">gcomp</span><span class="o">.</span><span class="n">CCollision</span><span class="p">)</span><span class="o">.</span><span class="n">aabb</span>
                <span class="n">c_hazard</span> <span class="o">=</span> <span class="n">h</span><span class="o">.</span><span class="n">get_component</span><span class="p">(</span><span class="n">gcomp</span><span class="o">.</span><span class="n">CHazard</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">gphysics</span><span class="o">.</span><span class="n">check_collision2d</span><span class="p">(</span><span class="n">p_aabb</span><span class="p">,</span> <span class="n">h_aabb</span><span class="p">):</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">rng</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">c_hazard</span><span class="o">.</span><span class="n">prob_of_death</span><span class="p">:</span>
                        <span class="n">e</span><span class="o">.</span><span class="n">destroy</span><span class="p">()</span>
                        <span class="n">p_events</span><span class="o">.</span><span class="n">events</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">EventType</span><span class="o">.</span><span class="n">DEATH</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>
                        <span class="k">if</span> <span class="n">e</span><span class="o">.</span><span class="n">id</span> <span class="ow">in</span> <span class="n">c_hazard</span><span class="o">.</span><span class="n">entrance_times</span><span class="p">:</span>
                            <span class="k">del</span> <span class="n">c_hazard</span><span class="o">.</span><span class="n">entrance_times</span><span class="p">[</span><span class="n">e</span><span class="o">.</span><span class="n">id</span><span class="p">]</span>

                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">e</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">c_hazard</span><span class="o">.</span><span class="n">entrance_times</span><span class="p">:</span>
                            <span class="n">c_hazard</span><span class="o">.</span><span class="n">entrance_times</span><span class="p">[</span><span class="n">e</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_time</span>
                        <span class="n">p_events</span><span class="o">.</span><span class="n">events</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                            <span class="p">(</span>
                                <span class="n">EventType</span><span class="o">.</span><span class="n">HAZARD</span><span class="p">,</span>
                                <span class="p">{</span>
                                    <span class="s2">&quot;prob&quot;</span><span class="p">:</span> <span class="n">c_hazard</span><span class="o">.</span><span class="n">prob_of_death</span><span class="p">,</span>
                                    <span class="s2">&quot;t_ent&quot;</span><span class="p">:</span> <span class="n">c_hazard</span><span class="o">.</span><span class="n">entrance_times</span><span class="p">[</span><span class="n">e</span><span class="o">.</span><span class="n">id</span><span class="p">],</span>
                                <span class="p">},</span>
                            <span class="p">)</span>
                        <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">e</span><span class="o">.</span><span class="n">id</span> <span class="ow">in</span> <span class="n">c_hazard</span><span class="o">.</span><span class="n">entrance_times</span><span class="p">:</span>
                        <span class="k">del</span> <span class="n">c_hazard</span><span class="o">.</span><span class="n">entrance_times</span><span class="p">[</span><span class="n">e</span><span class="o">.</span><span class="n">id</span><span class="p">]</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="n">e</span><span class="o">.</span><span class="n">active</span><span class="p">:</span>
                <span class="k">continue</span>

            <span class="c1"># check for collision with target</span>
            <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">entityManager</span><span class="o">.</span><span class="n">get_entities</span><span class="p">(</span><span class="s2">&quot;target&quot;</span><span class="p">):</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">t</span><span class="o">.</span><span class="n">active</span><span class="p">:</span>
                    <span class="k">continue</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">t</span><span class="o">.</span><span class="n">has_component</span><span class="p">(</span><span class="n">gcomp</span><span class="o">.</span><span class="n">CCollision</span><span class="p">):</span>
                    <span class="k">continue</span>

                <span class="k">if</span> <span class="n">gphysics</span><span class="o">.</span><span class="n">check_collision2d</span><span class="p">(</span>
                    <span class="n">p_aabb</span><span class="p">,</span> <span class="n">t</span><span class="o">.</span><span class="n">get_component</span><span class="p">(</span><span class="n">gcomp</span><span class="o">.</span><span class="n">CCollision</span><span class="p">)</span><span class="o">.</span><span class="n">aabb</span>
                <span class="p">):</span>
                    <span class="n">hit_target</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="n">p_events</span><span class="o">.</span><span class="n">events</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">EventType</span><span class="o">.</span><span class="n">TARGET</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;target&quot;</span><span class="p">:</span> <span class="n">t</span><span class="p">}))</span>
                    <span class="n">t</span><span class="o">.</span><span class="n">destroy</span><span class="p">()</span>
                    <span class="k">break</span>

            <span class="c1"># update state</span>
            <span class="n">p_dynamics</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">get_component</span><span class="p">(</span><span class="n">gcomp</span><span class="o">.</span><span class="n">CDynamics</span><span class="p">)</span>
            <span class="n">p_ii</span> <span class="o">=</span> <span class="n">p_dynamics</span><span class="o">.</span><span class="n">pos_inds</span>
            <span class="n">v_ii</span> <span class="o">=</span> <span class="n">p_dynamics</span><span class="o">.</span><span class="n">vel_inds</span>

            <span class="n">p_dynamics</span><span class="o">.</span><span class="n">state</span><span class="p">[</span><span class="n">p_ii</span><span class="p">]</span> <span class="o">=</span> <span class="n">gphysics</span><span class="o">.</span><span class="n">pixels_to_dist</span><span class="p">(</span>
                <span class="n">p_trans</span><span class="o">.</span><span class="n">pos</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dist_per_pix</span><span class="p">,</span> <span class="n">min_pos</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">physics</span><span class="o">.</span><span class="n">min_pos</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">v_ii</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">p_dynamics</span><span class="o">.</span><span class="n">state</span><span class="p">[</span><span class="n">v_ii</span><span class="p">]</span> <span class="o">=</span> <span class="n">gphysics</span><span class="o">.</span><span class="n">pixels_to_dist</span><span class="p">(</span>
                    <span class="n">p_trans</span><span class="o">.</span><span class="n">vel</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dist_per_pix</span>
                <span class="p">)</span>

        <span class="k">return</span> <span class="n">hit_target</span></div>


<div class="viewcode-block" id="SimpleUAV2d.s_input">
<a class="viewcode-back" href="../../../_autosummary/gncpy/games/SimpleUAV2d/gncpy.games.SimpleUAV2d.SimpleUAV2d.html#gncpy.games.SimpleUAV2d.SimpleUAV2d.s_input">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">s_input</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_input</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Validate user input.</span>

<span class="sd">        Only allows actions that correspond to a current entity.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        user_input : dict</span>
<span class="sd">            Each key is an entity id. Each value is a numpy array representing</span>
<span class="sd">            the action for that entity.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        out : dict</span>
<span class="sd">            Each key is an entity id. Each value is a numpy array for the action.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">entityManager</span><span class="o">.</span><span class="n">get_entity_ids</span><span class="p">()</span>
        <span class="n">out</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">user_input</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">ids</span><span class="p">:</span>
                <span class="n">out</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">out</span></div>


<div class="viewcode-block" id="SimpleUAV2d.s_game_over">
<a class="viewcode-back" href="../../../_autosummary/gncpy/games/SimpleUAV2d/gncpy.games.SimpleUAV2d.SimpleUAV2d.html#gncpy.games.SimpleUAV2d.SimpleUAV2d.s_game_over">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">s_game_over</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Determines if the game has met the end conditions.</span>

<span class="sd">        End conditions are if all players are dead and no random births, or</span>
<span class="sd">        all targets have been reached, or it has past the maximum time.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">n_players</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">entityManager</span><span class="o">.</span><span class="n">get_entities</span><span class="p">(</span><span class="s2">&quot;player&quot;</span><span class="p">))</span>
        <span class="n">all_players_dead</span> <span class="o">=</span> <span class="p">(</span>
            <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_random_player_birth_times</span>
            <span class="ow">and</span> <span class="n">n_players</span> <span class="o">==</span> <span class="mi">0</span>
            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_time</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_player_birth_time</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">game_over</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">current_time</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">max_time</span>
            <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">cur_target_seq</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">target_seq</span><span class="p">)</span>
            <span class="ow">or</span> <span class="n">all_players_dead</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="SimpleUAV2d.s_movement">
<a class="viewcode-back" href="../../../_autosummary/gncpy/games/SimpleUAV2d/gncpy.games.SimpleUAV2d.SimpleUAV2d.html#gncpy.games.SimpleUAV2d.SimpleUAV2d.s_movement">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">s_movement</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">action</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Move entities according to their dynamics.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        action : dict</span>
<span class="sd">            Each key is an entity id and its value is a 2 x 1 numpy array</span>
<span class="sd">            corresponding to control inputs for the given dynamics model. This</span>
<span class="sd">            comes from the input system.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">entityManager</span><span class="o">.</span><span class="n">get_entities</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">e</span><span class="o">.</span><span class="n">has_component</span><span class="p">(</span><span class="n">gcomp</span><span class="o">.</span><span class="n">CTransform</span><span class="p">):</span>
                <span class="n">eTrans</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">get_component</span><span class="p">(</span><span class="n">gcomp</span><span class="o">.</span><span class="n">CTransform</span><span class="p">)</span>
                <span class="n">eTrans</span><span class="o">.</span><span class="n">last_pos</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">eTrans</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">eTrans</span><span class="o">.</span><span class="n">last_pos</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">eTrans</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

                <span class="n">act_key</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">id</span>
                <span class="k">if</span> <span class="n">e</span><span class="o">.</span><span class="n">has_component</span><span class="p">(</span><span class="n">gcomp</span><span class="o">.</span><span class="n">CDynamics</span><span class="p">)</span> <span class="ow">and</span> <span class="n">act_key</span> <span class="ow">in</span> <span class="n">action</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                    <span class="n">eDyn</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">get_component</span><span class="p">(</span><span class="n">gcomp</span><span class="o">.</span><span class="n">CDynamics</span><span class="p">)</span>
                    <span class="n">eDyn</span><span class="o">.</span><span class="n">last_state</span> <span class="o">=</span> <span class="n">eDyn</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">propagate_dynamics</span><span class="p">(</span><span class="n">eDyn</span><span class="p">,</span> <span class="n">action</span><span class="p">[</span><span class="n">act_key</span><span class="p">])</span>

                    <span class="n">p_ii</span> <span class="o">=</span> <span class="n">eDyn</span><span class="o">.</span><span class="n">pos_inds</span>
                    <span class="n">v_ii</span> <span class="o">=</span> <span class="n">eDyn</span><span class="o">.</span><span class="n">vel_inds</span>
                    <span class="n">eTrans</span><span class="o">.</span><span class="n">pos</span> <span class="o">=</span> <span class="n">gphysics</span><span class="o">.</span><span class="n">dist_to_pixels</span><span class="p">(</span>
                        <span class="n">eDyn</span><span class="o">.</span><span class="n">state</span><span class="p">[</span><span class="n">p_ii</span><span class="p">],</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">dist_per_pix</span><span class="p">,</span>
                        <span class="n">min_pos</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">physics</span><span class="o">.</span><span class="n">min_pos</span><span class="p">,</span>
                    <span class="p">)</span>
                    <span class="k">if</span> <span class="n">v_ii</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">eTrans</span><span class="o">.</span><span class="n">vel</span> <span class="o">=</span> <span class="n">gphysics</span><span class="o">.</span><span class="n">dist_to_pixels</span><span class="p">(</span>
                            <span class="n">eDyn</span><span class="o">.</span><span class="n">state</span><span class="p">[</span><span class="n">v_ii</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">dist_per_pix</span>
                        <span class="p">)</span></div>


<div class="viewcode-block" id="SimpleUAV2d.basic_reward">
<a class="viewcode-back" href="../../../_autosummary/gncpy/games/SimpleUAV2d/gncpy.games.SimpleUAV2d.SimpleUAV2d.html#gncpy.games.SimpleUAV2d.SimpleUAV2d.basic_reward">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">basic_reward</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Calculate the reward for a timestep for the basic reward type.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        reward : float</span>
<span class="sd">            reward for the timestep.</span>
<span class="sd">        info : dict</span>
<span class="sd">            extra info useful for debugging.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">def</span><span class="w"> </span><span class="nf">_match_function</span><span class="p">(</span><span class="n">test_cap</span><span class="p">,</span> <span class="n">req_cap</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">req_cap</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">return</span> <span class="nb">sum</span><span class="p">([</span><span class="mi">1</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">test_cap</span> <span class="k">if</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">req_cap</span><span class="p">])</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">req_cap</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="mi">1</span>

        <span class="n">t</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_time</span>

        <span class="n">reward</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="c1"># accumulate rewards from all players</span>
        <span class="n">r_vel</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">r_haz_cumul</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">r_tar_cumul</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="n">r_death_cumul</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">r_wall_cumul</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">r_vel_cumul</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">player</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">entityManager</span><span class="o">.</span><span class="n">get_entities</span><span class="p">(</span><span class="s2">&quot;player&quot;</span><span class="p">):</span>
            <span class="n">r_hazard</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">r_target</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">r_death</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">r_wall</span> <span class="o">=</span> <span class="mi">0</span>

            <span class="n">p_dynamics</span> <span class="o">=</span> <span class="n">player</span><span class="o">.</span><span class="n">get_component</span><span class="p">(</span><span class="n">gcomp</span><span class="o">.</span><span class="n">CDynamics</span><span class="p">)</span>
            <span class="n">p_events</span> <span class="o">=</span> <span class="n">player</span><span class="o">.</span><span class="n">get_component</span><span class="p">(</span><span class="n">gcomp</span><span class="o">.</span><span class="n">CEvents</span><span class="p">)</span>
            <span class="n">p_capabilities</span> <span class="o">=</span> <span class="n">player</span><span class="o">.</span><span class="n">get_component</span><span class="p">(</span><span class="n">gcomp</span><span class="o">.</span><span class="n">CCapabilities</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">p_dynamics</span><span class="o">.</span><span class="n">vel_inds</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">p_dynamics</span><span class="o">.</span><span class="n">vel_inds</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">max_vel</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">p_dynamics</span><span class="o">.</span><span class="n">state_high</span><span class="p">[</span><span class="n">p_dynamics</span><span class="o">.</span><span class="n">vel_inds</span><span class="p">])</span>
                <span class="n">min_vel</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">p_dynamics</span><span class="o">.</span><span class="n">state_low</span><span class="p">[</span><span class="n">p_dynamics</span><span class="o">.</span><span class="n">vel_inds</span><span class="p">])</span>
                <span class="n">vel</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">p_dynamics</span><span class="o">.</span><span class="n">state</span><span class="p">[</span><span class="n">p_dynamics</span><span class="o">.</span><span class="n">vel_inds</span><span class="p">])</span>

                <span class="n">vel_per</span> <span class="o">=</span> <span class="n">vel</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">((</span><span class="n">max_vel</span><span class="p">,</span> <span class="n">min_vel</span><span class="p">))</span>
                <span class="k">if</span> <span class="n">vel_per</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">score</span><span class="o">.</span><span class="n">min_vel_per</span><span class="p">:</span>
                    <span class="n">r_vel</span> <span class="o">+=</span> <span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">score</span><span class="o">.</span><span class="n">vel_penalty</span>

            <span class="k">for</span> <span class="n">e_type</span><span class="p">,</span> <span class="n">info</span> <span class="ow">in</span> <span class="n">p_events</span><span class="o">.</span><span class="n">events</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">e_type</span> <span class="o">==</span> <span class="n">EventType</span><span class="o">.</span><span class="n">HAZARD</span><span class="p">:</span>
                    <span class="n">r_hazard</span> <span class="o">+=</span> <span class="o">-</span><span class="p">(</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">score</span><span class="o">.</span><span class="n">hazard_multiplier</span>
                        <span class="o">*</span> <span class="p">(</span><span class="n">info</span><span class="p">[</span><span class="s2">&quot;prob&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">100</span><span class="p">)</span>
                        <span class="o">*</span> <span class="p">(</span><span class="n">t</span> <span class="o">-</span> <span class="n">info</span><span class="p">[</span><span class="s2">&quot;t_ent&quot;</span><span class="p">])</span>
                    <span class="p">)</span>

                <span class="k">elif</span> <span class="n">e_type</span> <span class="o">==</span> <span class="n">EventType</span><span class="o">.</span><span class="n">DEATH</span><span class="p">:</span>
                    <span class="n">time_decay</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">score</span><span class="o">.</span><span class="n">death_scale</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span>
                        <span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">score</span><span class="o">.</span><span class="n">death_decay</span> <span class="o">*</span> <span class="n">t</span>
                    <span class="p">)</span>
                    <span class="n">r_death</span> <span class="o">=</span> <span class="o">-</span><span class="p">(</span>
                        <span class="n">time_decay</span>
                        <span class="o">*</span> <span class="n">_match_function</span><span class="p">(</span>
                            <span class="n">p_capabilities</span><span class="o">.</span><span class="n">capabilities</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">all_capabilities</span>
                        <span class="p">)</span>
                        <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">score</span><span class="o">.</span><span class="n">death_penalty</span>
                    <span class="p">)</span>
                    <span class="n">r_hazard</span> <span class="o">=</span> <span class="mi">0</span>
                    <span class="n">r_target</span> <span class="o">=</span> <span class="mi">0</span>
                    <span class="n">r_wall</span> <span class="o">=</span> <span class="mi">0</span>
                    <span class="n">r_vel</span> <span class="o">=</span> <span class="mi">0</span>
                    <span class="k">break</span>

                <span class="k">elif</span> <span class="n">e_type</span> <span class="o">==</span> <span class="n">EventType</span><span class="o">.</span><span class="n">TARGET</span><span class="p">:</span>
                    <span class="n">target</span> <span class="o">=</span> <span class="n">info</span><span class="p">[</span><span class="s2">&quot;target&quot;</span><span class="p">]</span>
                    <span class="n">t_capabilities</span> <span class="o">=</span> <span class="n">target</span><span class="o">.</span><span class="n">get_component</span><span class="p">(</span><span class="n">gcomp</span><span class="o">.</span><span class="n">CCapabilities</span><span class="p">)</span>
                    <span class="n">t_priority</span> <span class="o">=</span> <span class="n">target</span><span class="o">.</span><span class="n">get_component</span><span class="p">(</span><span class="n">gcomp</span><span class="o">.</span><span class="n">CPriority</span><span class="p">)</span>
                    <span class="n">match_per</span> <span class="o">=</span> <span class="n">_match_function</span><span class="p">(</span>
                        <span class="n">p_capabilities</span><span class="o">.</span><span class="n">capabilities</span><span class="p">,</span> <span class="n">t_capabilities</span><span class="o">.</span><span class="n">capabilities</span>
                    <span class="p">)</span>
                    <span class="n">r_target</span> <span class="o">=</span> <span class="p">(</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">score</span><span class="o">.</span><span class="n">target_multiplier</span>
                        <span class="o">*</span> <span class="n">t_priority</span><span class="o">.</span><span class="n">priority</span>
                        <span class="o">*</span> <span class="n">match_per</span>
                    <span class="p">)</span>

                <span class="k">elif</span> <span class="n">e_type</span> <span class="o">==</span> <span class="n">EventType</span><span class="o">.</span><span class="n">OBSTACLE</span><span class="p">:</span>
                    <span class="n">r_wall</span> <span class="o">+=</span> <span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">score</span><span class="o">.</span><span class="n">wall_penalty</span>

            <span class="n">r_haz_cumul</span> <span class="o">+=</span> <span class="n">r_hazard</span>
            <span class="n">r_tar_cumul</span> <span class="o">+=</span> <span class="n">r_target</span>
            <span class="n">r_death_cumul</span> <span class="o">+=</span> <span class="n">r_death</span>
            <span class="n">r_wall_cumul</span> <span class="o">+=</span> <span class="n">r_wall</span>
            <span class="n">r_vel_cumul</span> <span class="o">+=</span> <span class="n">r_vel</span>
            <span class="n">reward</span> <span class="o">+=</span> <span class="n">r_hazard</span> <span class="o">+</span> <span class="n">r_target</span> <span class="o">+</span> <span class="n">r_death</span> <span class="o">+</span> <span class="n">r_wall</span> <span class="o">+</span> <span class="n">r_vel</span>

        <span class="c1"># add fixed terms to reward</span>
        <span class="n">r_missed</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">game_over</span><span class="p">:</span>
            <span class="c1"># get all targets later in the sequence</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cur_target_seq</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">target_seq</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">target</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">targets</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">target</span><span class="o">.</span><span class="n">order</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">target_seq</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">cur_target_seq</span><span class="p">]:</span>
                        <span class="k">continue</span>
                    <span class="n">r_missed</span> <span class="o">+=</span> <span class="n">target</span><span class="o">.</span><span class="n">priority</span>

            <span class="c1"># get all remaining targets at current point in sequence</span>
            <span class="k">for</span> <span class="n">target</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">entityManager</span><span class="o">.</span><span class="n">get_entities</span><span class="p">(</span><span class="s2">&quot;target&quot;</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">target</span><span class="o">.</span><span class="n">active</span><span class="p">:</span>
                    <span class="n">r_missed</span> <span class="o">+=</span> <span class="o">-</span><span class="n">target</span><span class="o">.</span><span class="n">get_component</span><span class="p">(</span><span class="n">gcomp</span><span class="o">.</span><span class="n">CPriority</span><span class="p">)</span><span class="o">.</span><span class="n">priority</span>

            <span class="n">r_missed</span> <span class="o">*=</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">score</span><span class="o">.</span><span class="n">missed_multiplier</span>

        <span class="n">reward</span> <span class="o">+=</span> <span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">score</span><span class="o">.</span><span class="n">time_penalty</span> <span class="o">+</span> <span class="n">r_missed</span>

        <span class="n">info</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;hazard&quot;</span><span class="p">:</span> <span class="n">r_haz_cumul</span><span class="p">,</span>
            <span class="s2">&quot;target&quot;</span><span class="p">:</span> <span class="n">r_tar_cumul</span><span class="p">,</span>
            <span class="s2">&quot;death&quot;</span><span class="p">:</span> <span class="n">r_death_cumul</span><span class="p">,</span>
            <span class="s2">&quot;wall&quot;</span><span class="p">:</span> <span class="n">r_wall_cumul</span><span class="p">,</span>
            <span class="s2">&quot;missed&quot;</span><span class="p">:</span> <span class="n">r_missed</span><span class="p">,</span>
            <span class="s2">&quot;velocity&quot;</span><span class="p">:</span> <span class="n">r_vel_cumul</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="n">reward</span><span class="p">,</span> <span class="n">info</span></div>


<div class="viewcode-block" id="SimpleUAV2d.s_score">
<a class="viewcode-back" href="../../../_autosummary/gncpy/games/SimpleUAV2d/gncpy.games.SimpleUAV2d.SimpleUAV2d.html#gncpy.games.SimpleUAV2d.SimpleUAV2d.s_score">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">s_score</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Determines the total score for the timestep.</span>

<span class="sd">        Raises</span>
<span class="sd">        ------</span>
<span class="sd">        NotImplementedError</span>
<span class="sd">            An incorrect type is specified.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        score : flaot</span>
<span class="sd">            total score for this timestep.</span>
<span class="sd">        info : dict</span>
<span class="sd">            extra info from the score system</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">score</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;basic&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">basic_reward</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Score system has no implementation for reward type </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">score</span><span class="o">.</span><span class="n">type</span>
            <span class="p">)</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span></div>


<div class="viewcode-block" id="SimpleUAV2d.step">
<a class="viewcode-back" href="../../../_autosummary/gncpy/games/SimpleUAV2d/gncpy.games.SimpleUAV2d.SimpleUAV2d.html#gncpy.games.SimpleUAV2d.SimpleUAV2d.step">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">step</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_input</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Perform one iteration of the game loop.</span>

<span class="sd">        Multiple physics updates can be made between rendering calls. Also</span>
<span class="sd">        spwans players if needed and updates the targets based on what has been</span>
<span class="sd">        reached.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        user_input : dict</span>
<span class="sd">            Each key is an integer representing the entity id that the action</span>
<span class="sd">            applies to. Each value is a numpy array for the action to take.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        info : dict</span>
<span class="sd">            Extra infomation for debugging.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># reset handles spawn so don&#39;t call it on first step after reset</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_performed_reset_spawn</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">spawn_players</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_performed_reset_spawn</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">create_targets</span><span class="p">()</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">user_input</span><span class="p">)</span></div>
</div>

</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, Laboratory for Autonomy, GNC, and Estimation Research (LAGER).</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>